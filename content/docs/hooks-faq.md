---
id: hooks-faq
title: Hooks FAQ
permalink: docs/hooks-faq.html
prev: hooks-reference.html
---

*ุงูุฎุทุงูุงุช* ูู ุฅุถุงูุฉ ุฌุฏูุฏุฉ ุฅูู ุงูุฅุตุฏุงุฑ 16.8 ูู Reactุ ุฅุฐ ุชุณูุญ ูู ุจุงุณุชุนูุงู ููุฒุฉ ุงูุญุงูุฉ ูููุฒุงุช React ุงูุฃุฎุฑู ุฏูู ูุชุงุจุฉ ุฃู ุตูู.

ุชุฌูุจ ูุฐู ุงูุตูุญุฉ ุนู ุจุนุถ ุงูุฃุณุฆูุฉ ุงูุชู ูุชูุฑุฑ ุทุฑุญูุง ุญูู [ุงูุฎุทุงูุงุช](/docs/hooks-overview.html).

<!--
  if you ever need to regenerate this, this snippet in the devtools console might help:

  $$('.anchor').map(a =>
    `${' '.repeat(2 * +a.parentNode.nodeName.slice(1))}` +
    `[${a.parentNode.textContent}](${a.getAttribute('href')})`
  ).join('\n')
-->

* **[	ุฎุทุฉ ุชุจูู ุงูุฎุทุงูุงุช](#adoption-strategy)**
  * [	ุฃู ุฅุตุฏุงุฑ ูู React ูุชุถูู ุงูุฎุทุงูุงุชุ](#which-versions-of-react-include-hooks)
  * [ูู ุงุญุชุงุฌ ุฅูู ุฅุนุงุฏุฉ ูุชุงุจุฉ ุฌููุน ููููุงุช ุงูุฃุตูุงู ุงูุฎุงุตุฉ ุจูุ](#do-i-need-to-rewrite-all-my-class-components)
  * [	ูุง ุงูุฐู ูููููู ูุนูู ูุน ุงูุฎุทุงูุงุช ููุง ูููููู ูุนูู ูุน ุงูุฃุตูุงูุ](#what-can-i-do-with-hooks-that-i-couldnt-with-classes)
  * [	ูุง ูู ูุณุจุฉ ุงููุนุฑูุฉ ุงูุชู ุจููุช ุนูู ุตูุฉ ุจู React ูููุง ูุฎุต ุงูุฎุทุงูุงุชุ](#how-much-of-my-react-knowledge-stays-relevant)
  * [ุฃูุชูุฌุจ ุนูู ุงุณุชุนูุงู ุงูุฎุทุงูุงุชุ ุฃู ุงูุฃุตูุงูุ ุฃู ููุงููุงุ](#should-i-use-hooks-classes-or-a-mix-of-both)
  * [ูู ุชุบุทู ุงูุฎุทุงูุงุช ุฌููุน ุญุงูุงุช ุงูุงุณุชุฎุฏุงู ุงูุชู ุชููุฑูุง ุงูุฃุตูุงูุ](#do-hooks-cover-all-use-cases-for-classes)
  * [	ูู ุชุณุชุจุฏู ุงูุฎุทุงูุงุช ุฎุงุตูุงุช ุงูุชุตููุฑ ูุงูููููุงุช ุฐุงุช ุงูุชุฑุชูุจ ุงูุฃุนููุ](#do-hooks-replace-render-props-and-higher-order-components)
  * [ูุง ุงูุฐู ุชุนููู ุงูุฎุทุงูุงุช ุจุงููุณุจุฉ ูููุงุฌูุงุช ุงูุจุฑูุฌูุฉ ุงูุดููุฑุฉ ูุซู connect()โ ูู ููุชุจุฉ Redux ูููุชุจุฉ React Routerุ](#what-do-hooks-mean-for-popular-apis-like-redux-connect-and-react-router)
  * [	ูู ุชุนูู ุงูุฎุทุงูุงุช ูุน ุฃููุงุน ุงูุจูุงูุงุช ุงูุซุงุจุชุฉ (static typing)ุ](#do-hooks-work-with-static-typing)
  * [	ููู ูููู ุงุฎุชุจุงุฑ ุงูููููุงุช ุงูุชู ุชุณุชุนูู ุงูุฎุทุงูุงุชุ](#how-to-test-components-that-use-hooks)
  * [	ูุง ุงูุฐู ูุญุตู ุจุงูุถุจุท ุนูุฏ ูุฑุถ ุชุทุจูู ููุงุนุฏ ุฅุถุงูุฉ ุชุตุญูุญ ุงูุฃุฎุทุงุก ESLintุ](#what-exactly-do-the-lint-rules-enforce)
* **[ูู ุงูุฃุตูุงู ุฅูู ุงูุฎุทุงูุงุช](#from-classes-to-hooks)**
  * [	ููู ุชุชูุงูู ุชูุงุจุน ุฏูุฑุฉ ุงูุญูุงุฉ ูุน ุงูุฎุทุงูุงุชุ](#how-do-lifecycle-methods-correspond-to-hooks)
  * [ููู ูููููู ุฃู ุฃุญุตู ุนูู ูุนููุงุช ุจูุงุณุทุฉ ุงูุฎุทุงูุงุชุ](#how-can-i-do-data-fetching-with-hooks)
  * [	ูู ููุงูู ุดูุก ุดุจูู ุจูุชุบูุฑุงุช ุงููุณุฎุฉุ](#is-there-something-like-instance-variables)
  * [	ูู ูุฌุจ ุฃู ุงุณุชุนูู ูุชุบูุฑ ุญุงูุฉ ูุงุญุฏ ุฃู ุนุฏุฉ ูุชุบูุฑุงุชุ](#should-i-use-one-or-many-state-variables)
  * [	ูู ูููููู ุชูููุฐ ุชุฃุซูุฑ ุนูุฏ ุฅุฌุฑุงุก ุงูุชุญุฏูุซุงุช ููุทุ](#can-i-run-an-effect-only-on-updates)
  * [ููู ูููู ุฌูุจ ุงูุฎุงุตูุฉ ุฃู ุงูุญุงูุฉ ุงูุณุงุจูุฉุ](#how-to-get-the-previous-props-or-state)
  * [ููุงุฐุง ุฃุฑู ุงูุฎุตุงุฆุต ูุฏููุฉ ุฃู ุงูุญุงูุฉ ุฏุงุฎู ุงูุฏุงูุฉุ](#why-am-i-seeing-stale-props-or-state-inside-my-function)
  * [	ููู ุฃููููุฐ getDerivedStateFromPropsุ](#how-do-i-implement-getderivedstatefromprops)
  * [	ูู ููุฌุฏ ุดูุก ูุดุจู forceUpdateุ](#is-there-something-like-forceupdate)
  * [	ุฃูููููู ุฅูุดุงุก ูุฑุฌุน ุฅูู ูููู ุฏุงูุฉุ](#can-i-make-a-ref-to-a-function-component)
  * [ููู ูููููู ููุงุณ ุนูุฏุฉ DOMุ](#how-can-i-measure-a-dom-node)
  * [	ูุง ุงูุฐู ูุนููู const [thing, setThing] = useState()โุ](#what-does-const-thing-setthing--usestate-mean)
* **[	ุชุญุณููุงุช ุงูุฃุฏุงุก](#performance-optimizations)**
  * [	ุฃูููููู ุชุฎุทู ุชุฃุซูุฑ ูุง ูู ุนูููุงุช ุงูุชุญุฏูุซุ](#can-i-skip-an-effect-on-updates)
  * [ูู ูู ุงูุขูู ุญุฐู ุงูุฏูุงู ูู ูุงุฆูุฉ ุงูุชุจุนูุงุชุ](#is-it-safe-to-omit-functions-from-the-list-of-dependencies)
  * [ูุงุฐุง ุฃูุนู ุฅุฐุง ุชุบูุฑุช ุชุจุนูุงุช ุงูุชุฃุซูุฑ ุงูุฎุงุตุฉ ุจู ูุซูุฑูุงุ](#what-can-i-do-if-my-effect-dependencies-change-too-often)
  * [	ููู ูููููู ุชูููุฐ shouldComponentUpdateุ](#how-do-i-implement-shouldcomponentupdate)
  * [	ููู ูููู ุงุณุชุธูุงุฑ (memoize) ุงูุนูููุงุช ุงูุญุณุงุจูุฉุ](#how-to-memoize-calculations)
  * [ููู ูููู ุฅูุดุงุก ูุงุฆูุงุช ูุณุชูุฒูุฉ ููุฃุฏุงุก ุจุดูู ูุณููุ](#how-to-create-expensive-objects-lazily)
  * [	ูู ุชุชุณู ุงูุฎุทุงูุงุช ุจุงูุจุทุฆ ูุฅูุดุงุฆูุง ุฏูุงููุง ูู ุนูููุฉ ุงูุชุตููุฑุ](#are-hooks-slow-because-of-creating-functions-in-render)
  * [	ูุง ูู ุงูุณุจูู ูุชุฌูุจ ุชูุฑูุฑ ุฑุฏูุฏ ุงููุฏุงุก ููุฏุงุฎูุ](#how-to-avoid-passing-callbacks-down)
  * [	ููู ุชุฌุฑู ุนูููุฉ ูุฑุงุกุฉ ูููุฉ ุชุชุบูุฑ ูุซูุฑูุง ูู ุงูุฎุทุงู useCallbackุ](#how-to-read-an-often-changing-value-from-usecallback)
* **[	ูุง ุฎูู ุงูุณุชุงุฑ](#under-the-hood)**
  * [	ููู ุชุฑุจุท React ุงุณุชุฏุนุงุกุงุช ุงูุฎุทุงูุงุช ูุน ุงูููููุงุชุ](#how-does-react-associate-hook-calls-with-components)
  * [ูุง ูู ุงููุตุฏุฑ ุงูุฐู ุงุณุชููุช ูู ุงูุฎุทุงูุงุชุ](#what-is-the-prior-art-for-hooks)

## ุฎุทุฉ ุชุจูู ุงูุฎุทุงูุงุช {#adoption-strategy}

### ุฃู ุฅุตุฏุงุฑ ูู React ูุชุถูู ุงูุฎุทุงูุงุชุ {#which-versions-of-react-include-hooks}

ุจุฏุกูุง ูู ุงูุฅุตุฏุงุฑ 16.8.0ุ ุชุถููุช React ุชูููุฐูุง ูุณุชูุฑูุง ููุฎุทุงูุงุช ูู ุฃุฌู:

* React DOM
* React DOM Server
* React Test Renderer
* React Shallow Renderer

ูุงุญุธ ุฃู **ูุชูููู ุงูุฎุทุงูุงุช ุ ูุฌุจ ุฃู ุชููู ุฌููุน ุญุฒู  16.8.0 React    ุฃู ุฃุนูู**. ูู ุชุนูู ุงูุฎุทุงูุงุช ุฅุฐุง ูุณูุช ุงูุชุญุฏูุซ ุ ุนูู ุณุจูู ุงููุซุงู ุ  React DOM.

ุณุชุฏุนู ReactNative ุงูุฎุทุงูุงุช ุฏุนููุง ูุงูููุง ูู ุงูุฅุตุฏุงุฑ ุงููุณุชูุฑ ุงููุงุฏู.

### ูู ุงุญุชุงุฌ ุฅูู ุฅุนุงุฏุฉ ูุชุงุจุฉ ุฌููุน ููููุงุช ุงูุฃุตูุงู ุงูุฎุงุตุฉ ุจูุ {#do-i-need-to-rewrite-all-my-class-components}

ูุง. ูุง ููุฌุฏ [ุฃูุฉ ุฎุทุท](/docs/hooks-intro.html#gradual-adoption-strategy) ูุณุชูุจููุฉ ูุญุฐู ุงูุฃุตูุงู ูู React. ุณุชุจูู ุงูุฃุตูุงู ูุถููุฉ ูู Reactุ ุฅุฐ ูุง ูููู ุชุญูููู ุนุจุก ุฅุนุงุฏุฉ ูุชุงุจุฉ ุงูุดููุฑุงุช ูู ุฌุฏูุฏ. ุฌููู ูุง ููุตุญ ุจู ูู ุชุฌุฑูุจ ุงูุฎุทุงูุงุช ูู ุงูุดููุฑุงุช ุงูุฌุฏูุฏุฉ.

### ูุง ุงูุฐู ูููููู ูุนูู ูุน ุงูุฎุทุงูุงุช ููุง ูููููู ูุนูู ูุน ุงูุฃุตูุงูุ{#what-can-i-do-with-hooks-that-i-couldnt-with-classes}

ุชููุฑ ุงูุฎุทุงูุงุช ูุณููุฉู ุฌุฏูุฏุฉู ุชุชุณู ุจุงูููุฉ ูุฅุนุงุฏุฉ ุงุณุชุนูุงู ุฏุงูุฉ (ูุธููุฉ ูุง) ุจูู ุงูููููุงุช. ุชูุซูู ["ุจูุงุก ุฎุทุงู ุฎุงุต ุจู"](/docs/hooks-custom.html)  ูุนุทูู ููุญุฉู ุนู ูุง ูููู ูุนูู ูุน ุงูุฎุทุงูุงุช. ุชุดุฑุญ [ูุฐู ุงูููุงูุฉ](https://medium.com/@dan_abramov/making-sense-of-react-hooks-fdbde8803889) ุงูู ูุดุฑูุง ุฃุญุฏ ุฃูุฑุงุฏ ูุฑูู React ุงูุฃุณุงุณููู ุจูุธุฑุฉ ุชูุตูููุฉ ุงูุขูุงู ุงูุชู ููุชุญูุช ุฃูุงููุง ุจุฅุถุงูุฉ ุงูุฎุทุงูุงุช ุฅูู React.

### ูุง ูู ูุณุจุฉ ุงููุนุฑูุฉ ุงูุชู ุจููุช ุนูู ุตูุฉ ุจู React ูููุง ูุฎุต ุงูุฎุทุงูุงุชุ {#how-much-of-my-react-knowledge-stays-relevant}

ุงูุฎุทุงูุงุช ูู ุทุฑููุฉู ูุจุงุดุฑุฉู ูุงุณุชุนูุงู ููุฒุงุช React ุงูุชู ุชุนุฑููุง ูุณุจููุง ูุซู ุงูุญุงูุฉุ ูุฏูุฑุฉ ุงูุญูุงุฉุ ูุงูุณูุงูุ ูุงููุฑุงุฌุน (refs). ุฅููุง ูู ุชุบูููุฑ ุจุดูู ุฃุณุงุณู ููููุฉ ุนูู Reactุ ููุนุฑูุชู ุจุงูููููุงุช ูุงูุฎุงุตูุงุชุ ูุชุฏูู ุงูุจูุงูุงุช ูู ุงูุฃุนูู ุฅูู ุงูุฃุณูู (top-down data flow) ุณุชุจูู ููุง ูู ููู ูุบูููุฑ ุฃู ุดูุก.

ุชูุชูู ุงูุฎุทุงูุงุช ููุญู ุชุนูููู ุฎุงุต ุจูุง ููุท. ุฅู ูุงู ููุงูู ุฃู ุดูุก ูุงูุต ูู ูุฐุง ุงูุชูุซููุ ุฃูุดุฆ, [ูุดููุฉู ุนูู GitHub](https://github.com/reactjs/reactjs.org/issues/new) ูุณูุจุฐู ูุตุงุฑู ุฌูุฏูุง ููุณุงุนุฏุชู.

### ุฃูุชูุฌุจ ุนูู ุงุณุชุนูุงู ุงูุฎุทุงูุงุชุ ุฃู ุงูุฃุตูุงูุ ุฃู ููุงููุงุ{#should-i-use-hooks-classes-or-a-mix-of-both}

ูุดุฌุน ุนูู ุงูุจุฏุก ุจุชุฌุฑูุจ ุงูุฎุทุงูุงุช ูุงุณุชุนูุงููุง ูู ููููุงุชู ุงูุฌุฏูุฏุฉ ุนูุฏูุง ุชุดุนุฑ ุฃูู ุฌุงูุฒ ูุฐูู. ุงุญุฑุต ุนูู ููุงููุฉ ูู ูุฑุฏ ูู ุฃูุฑุงุฏ ูุฑููู ุฃูุถูุง ุนูู ุงุณุชุนูุงููุง ุจุนุฏ ุฃู ูููููุง ูุฏ ุงุทูุนูุง ุนูู ูุงูู ุชูุซูู ุงูุฎุทุงูุงุช. ูุง ููุตุญ ุจุฅุนุงุฏุฉ ูุชุงุจุฉ ุงูุฃุตูุงู ุงูููุฌูุฏุฉ ูุชุญููููุง ุฅูู ุฎุทุงูุงุช ุฅูุง ุฅุฐุง ููุช ูุฏ ุฎุทุทุช ูุณุจููุง ููุนู ุฐูู (ุฃู ูุฅุตูุงุญ ูุดููุฉ ูุซููุง ุฃู ูุบุฑุถ ุขุฎุฑ).

ูุง ุชุณุชุทูุน ุงุณุชุนูุงู ุงูุฎุทุงูุงุช ุฏุงุฎู ูููู ุตููุ ูููู ููููู ุจุงูุชุฃููุฏ ุงููุฒุฌ ุจูู ุงูุฃุตูุงู ูููููุงุช ุฏุงูุฉ ูุน ุงูุฎุทุงูุงุช ูู ุดุฌุฑุฉ ูุงุญุฏุฉ. ุณูุงุกู ูุงู ููููู ูุง ุตูููุง ุฃู ุฏุงูุฉูุ ูุฅููู ุชูู ุงูุฎุทุงูุงุช ุงููุณุชุนููุฉ ูู ุชูุงุตูู ุงูุชูููุฐ ูุฐูู ุงููููู. ูุชููุน ุนูู ุงููุฏู ุงูุจุนูุฏ ุฃู ุชุตุจุญ ุงูุฎุทุงูุงุช ุงููุณููุฉ ุงูุฑุฆูุณูุฉ ุงูุชู ูุณุชุนูููุง ุงูุฌููุน ูู ูุชูุฉ ููููุงุช React.

### ูู ุชุบุทู ุงูุฎุทุงูุงุช ุฌููุน ุญุงูุงุช ุงูุงุณุชุฎุฏุงู ุงูุชู ุชููุฑูุง ุงูุฃุตูุงูุ {#do-hooks-cover-all-use-cases-for-classes}

ูุฏููุง ูู ุงูุฎุทุงูุงุช ูู ุฃู ุชุบุทู ุฌููุน ุญุงูุงุช ุงุณุชุฎุฏุงู ุงูุฃุตูุงู ูู ุฃูุฑุจ ููุช ูููู. ููุณ ููุงูู ุฃู ุฎุทุงู ููุงูุฆ ูุฏูุฑุชู ุงูุญูุงุฉ `getSnapshotBeforeUpdate` ู `componentDidCatch` ุงูุบูุฑ ุดุงุฆุนุชูู ุจุนุฏุ ูุง ุชูููุ ุฅุฐ ุณุชุบุทู ุงูุฎุทุงูุงุช ูุฐู ุงููุงุญูุฉ ูุฑูุจูุง.

ูุง ุฒุงูุช ุงูุฎุทุงูุงุช ุญุฏูุซุฉ ุงูุนูุฏุ ููุฏ ูุง ุชุชูุงูู ุจุนุถ ุงูููุชุจุงุช ุงููููุฑุฉ ูู ุทุฑู ุซุงูุซ ูุนูุง ูู ุงูููุช ุงูุญุงูู.

### ูู ุชุณุชุจุฏู ุงูุฎุทุงูุงุช ุฎุงุตูุงุช ุงูุชุตููุฑ ูุงูููููุงุช ุฐุงุช ุงูุชุฑุชูุจ ุงูุฃุนููุ {#do-hooks-replace-render-props-and-higher-order-components}

ุบุงูุจูุงุ ุฎุงุตูุงุช ุงูุชุตููุฑ ูุงูููููุงุช ุฐุงุช ุงูุชุฑุชูุจ ุงูุฃุนูู ุชูุตูููุฑ ุงุจููุง ูุงุญุฏูุง ููุท. ูุนุชูุฏ ุฃููู ุงูุฎุทุงูุงุช ูู ูุณููุฉู ุจุณูุทุฉู ูุชุฎุฏู ุญุงูุฉ ุงูุงุณุชุฎุฏุงู ูุฐู. ูุง ูุฒุงู ููุงูู ูุชุณุนู ูููุง ุงูููุทูู (ูุฏ ูููู ูููู `scroller` ุงูุชุฑุงุถู ูุซููุง ุงูุฎุงุตูุฉ `renderItem` ุฃู ูุฏ ูููู ูููู `container` ุญุงูู ุนูู ูููู DOM ุฎุงุตุฉ ุจู)ุ ูููู ูู ูุนุธู ุงูุญุงูุงุชุ ุณุชููู ุงูุฎุทุงูุงุช ูุงููุฉ ููููููุง ุฃู ุชุณุงุนุฏ ูู ุชูููู ุงูุชุดุนุจ ูู ุดุฌุฑุชู.

### ูุง ุงูุฐู ุชุนููู ุงูุฎุทุงูุงุช ุจุงููุณุจุฉ ูููุงุฌูุงุช ุงูุจุฑูุฌูุฉ ุงูุดููุฑุฉ ูุซู `()connect` ูู ููุชุจุฉ Redux ูููุชุจุฉ React Routerุ {#what-do-hooks-mean-for-popular-apis-like-redux-connect-and-react-router}

ููููู ุงูุงุณุชูุฑุงุฑ ุจุงุณุชุนูุงู ุงููุงุฌูุงุช ุงูุจุฑูุฌูุฉ ููุณูุง ุงูุชู ุชุณุชุนูููุง ุนุงุฏุฉูุ ุฅุฐ ุณุชุณุชูุฑ ุจุงูุนูู ุฏูู ุฃูุฉ ูุดููุงุช.

ูู ุงููุณุชูุจูุ ูุฏ ุชุญูู ุฅุตุฏุงุฑุงุช ุฌุฏูุฏุฉ ูู ูุงุชูู ุงูููุชุจุชูู ุฎุทุงูุงุช ูุฎุตุตุฉ ูุซู `useRedux()`โ ุฃู `useRouter()`โ ุชูููู ูู ุงุณุชุนูุงู ููุณ ุงูููุฒุงุช ุฏูู ุงูุญุงุฌุฉ ุฅูู ููููุงุช ููุบููููุฉ.

### ูู ุชุนูู ุงูุฎุทุงูุงุช ูุน ุฃููุงุน ุงูุจูุงูุงุช ุงูุซุงุจุชุฉ (static typing)ุ {#do-hooks-work-with-static-typing}

ุตููููููุช ุงูุฎุทุงูุงุช ูุน ุฃุฎุฐ ุงูุฃููุงุน ุงูุซุงุจุชุฉ ุจุงูุญุณุจุงู. ููููุง ูุงูุช ุงูุฎุทุงูุงุช ุฏูุงููุงุ ูุฅููููุง ุฃุณูู ูููุชุงุจุฉ ุงูุตุญูุญุฉ ูู ุฃููุงุท ุฃุฎุฑู ูุซู ุงูููููุงุช ุฐุงุช ุงููุณุชูู ุงูุฃุนูู. ุชุชุถูู ุฃุญุฏุซ ุชุนุฑููุงุช ููุฃุฏุงุฉ Flow ู TypeScript ูู React ุฏุนููุง ููุฎุทุงูุงุช.

ุงูุฃูู ูู ุฐูู ุฃููู ุงูุฎุทุงูุงุช ุงููุฎุตุตุฉ ุชููุญู ุงูููุฉ ูุชูููุฏ ูุงุฌูุฉ React ุงูุจุฑูุฌูุฉ ุฅู ุฃุฑุฏุช ูุชุงุจุชูุง ุจุดูู ุตุงุฑู ุจุทุฑููุฉ ูุง. ุชููุฑ ูู React ุงูุฃููุงุน ุงูุฃุณุงุณูุฉ (primitives). ูููู ููููู ุงูุฏูุฌ ุจูููุง ุจุทุฑุงุฆู ุนุฏุฉ ุฃูุซุฑ ูู ุงูุทุฑุงุฆู ุงูุบูุฑ ุชูููุฏูุฉ ุงูุชู ููุฑูุงูุง.

### ููู ูููู ุงุฎุชุจุงุฑ ุงูููููุงุช ุงูุชู ุชุณุชุนูู ุงูุฎุทุงูุงุชุ {#how-to-test-components-that-use-hooks}

ูู ูุฌูุฉ ูุธุฑ Reactุ ุงูููููุงุช ุงูุชู ุชุณุชุนูู ุงูุฎุทุงูุงุช ูู ููููุงุช ุนุงุฏูุฉ ุชูุงููุง. ุฅู ูู ููู ุฎูุงุฑ ุงูุงุฎุชุจุงุฑ ุงูุฎุงุต ุจู ูุนุชูุฏ ุนูู DOM ุงูุงูุชุฑุงุถู ููุงุฆูุงุช React ุงูุฏุงุฎููุฉ (ุฃู React internals)ุ ูุฌุจ ุฃูุง ุชุฎุชูู ุนูููุฉ ุงุฎุชุจุงุฑ ุงูููููุงุช ูุน ุงูุฎุทุงูุงุช ุนู ุชูู ุงูุชู ุงุนุชุฏุช ุนูู ุงุณุชุนูุงููุง ุนุงุฏุฉู ูุงุฎุชุจุงุฑ ุงูููููุงุช.

ุนูู ุณุจูู ุงููุซุงูุ ุฏุนูุง ููุชุฑุถ ุฃูู ูุฏููุง ูููู ุงูุนุฏุงุฏ (counter) ุงูุชุงูู:

```js
function Example() {
  const [count, setCount] = useState(0);
  useEffect(() => {
    document.title = `You clicked ${count} times`;
  });
  return (
    <div>
      <p>You clicked {count} times</p>
      <button onClick={() => setCount(count + 1)}>
        Click me
      </button>
    </div>
  );
}
```

ุณูุฎุชุจุฑู ุจุงุณุชุนูุงู `ReactDOM`. ููุชุฃูุฏ ูู ุชุทุงุจู ุงูุณููู ูุน ุงูุฐู ูุญุตู ูู ุงููุชุตูุญุ ุณูุบูู ุนูููุฉ ุชุตููุฑ ูุชุญุฏูุซ ุงูุดููุฑุฉ ูู ุงุณุชุฏุนุงุกุงุช [`ReactTestUtils.act()โ`](https://reactjs.org/docs/test-utils.html#act):

```js{3,20-22,29-31}
import React from 'react';
import ReactDOM from 'react-dom';
import { act } from 'react-dom/test-utils';
import Counter from './Counter';

let container;

beforeEach(() => {
  container = document.createElement('div');
  document.body.appendChild(container);
});

afterEach(() => {
  document.body.removeChild(container);
  container = null;
});

it('can render and update a counter', () => {
  // ุงุฎุชุจุฑ ุฃูู ุชุตููุฑ ูุชุฃุซูุฑ
  act(() => {
    ReactDOM.render(<Counter />, container);
  });
  const button = container.querySelector('button');
  const label = container.querySelector('p');
  expect(label.textContent).toBe('You clicked 0 times');
  expect(document.title).toBe('You clicked 0 times');

  // ุงุฎุชุจุฑ ุซุงูู ุชุตููุฑ ูุชุฃุซูุฑ
  act(() => {
    button.dispatchEvent(new MouseEvent('click', {bubbles: true}));
  });
  expect(label.textContent).toBe('You clicked 1 times');
  expect(document.title).toBe('You clicked 1 times');
});
```

ุชุทุจููู ุงูุงุณุชุฏุนุงุกุงุช `act()`โ ุฃูุถูุง ุงูุชุฃุซูุฑุงุช ุฏุงุฎููุง.

ุฅู ุฃุฑุฏุช ุงุฎุชุจุงุฑ ุฎุทุงู ูุฎุตุตุ ููููู ูุนู ุฐูู ุนุจุฑ ุฅูุดุงุก ูููู ูู ุงุฎุชุจุงุฑูุ ูุงุณุชุนูุงู ุฐูู ุงูุฎุทุงู ููู. ูุชุณุชุทูุน ุจุนุฏุฆุฐู ุงุฎุชุจุงุฑ ุงููููู ุงูุฐู ูุชุจุชู.

ูุชูููู ุงูุดููุฑุฉ ุงููุชุฏุงููุฉ (boilerplate)ุ ููุตู ุจุงุณุชุนูุงู ุงูููุชุจุฉ [`react-testing-library`](https://git.io/react-testing-library) ุงูุชู ุตููููููุช ูุชุดุฌูุน ูุชุงุจุฉ ุงุฎุชุจุงุฑุงุช ุชุณุชุนูู ููููุงุชู ููุง ุณููุนู ุงููุณุชุฎุฏู ุงูููุงุฆู.

### ูุง ุงูุฐู ูุญุตู ุจุงูุถุจุท ุนูุฏ ูุฑุถ ุชุทุจูู ููุงุนุฏ [ุฅุถุงูุฉ ุชุตุญูุญ ุงูุฃุฎุทุงุก ESLint](https://www.npmjs.com/package/eslint-plugin-react-hooks) enforceุ {#what-exactly-do-the-lint-rules-enforce}

ูููุฑ ุงูุฅุถุงูุฉ  [ESLint plugin](https://www.npmjs.com/package/eslint-plugin-react-hooks) ุงูุชู ุชูุฑุถ ุชุทุจูู [ุงูููุงุนุฏ ุงูุฎุงุตุฉ ุจุงูุฎุทุงูุงุช](/docs/hooks-rules.html) ุนูููุง ูุชุฌูุจ ุญุตูู ุฃูุฉ ุฃุฎุทุงุก. ุฅููุง ุชูุชุฑุถ ุฃููู ุฃูุฉ ุฏุงูุฉ ุชุจุฏุฃ ุจุงูุณุงุจูุฉ "`use`" ุซู ููููุง ุญุฑู ูุจูุฑ ูู ุฎุทุงู. ูุญู ูุฏุฑู ุฃููู ูุฐู ุงูุทุฑููุฉ ููุชุนุฑู ุนูู ุงูุฎุทุงูุงุช ููุณุช ูุซุงููุฉ ููุฏ ูููู ููุงูู ุจุนุถ ุงูุฅูุฌุงุจูุงุช ุงูุฒุงุฆูุฉ (false positives)ุ ูููู ุจุฏูู ุนูุฑูู ููุชุดุฑ ูู ุจูุฆุฉ ุงูุนูู (ecosystem-wide convention)ุ ููุณ ููุงูู ุฃูุฉ ูุณููุฉ ูุฌุนู ุงูุฎุทุงูุงุช ุชุนูู ุจุดูู ุตุญูุญ. ุฃุถู ุฅูู ุฐูู ุฃููู ุงูุฃุณูุงุก ุงูุทูููุฉ ุณุชุญุจููุท ุงูุขุฎุฑูู ูู ุฅูููุง ุชุจูู ุงูุฎุทุงูุงุช ูุงุณุชุนูุงููุง ุฃู ุงุชุจุงุน ูุง ูู ูุชุนุงุฑู ุนููู.

ุจุงุฎุชุตุงุฑุ ูุฑุถ ุชุทุจูู ุงูููุงุนุฏ ูู:

* ุงุณุชุฏุนุงุก ุงูุฎุทุงูุงุช ุฅูููุง ุฏุงุฎู ุฏุงูุฉ `PascalCase` (ุงูุชุฑุถ ููููุง ูููููุง) ุฃู ุฏุงูุฉ `useSomething` ุฃุฎุฑู (ุงูุชุฑุถ ููููุง ุฎุทุงููุง ูุฎุตุตูุง).
* ุชูุณุชุฏุนูู ุงูุฎุทุงูุงุช ุจุงูุชุฑุชูุจ ููุณู ูู ูู ุนูููุฉ ุชุตููุฑ.

ููุงูู ุจุถุนุฉ ุฃุณุงููุจ ูุดู (heuristics) ุฃุฎุฑู ููุฏ ุชุชุบูุฑ ูุน ูุฑูุฑ ุงูููุชุ ุฅุฐ ูุถุจุท ุงููุงุนุฏุฉ ููุตูุบูุง ูุชุญููู ุงูุชูุงุฒู ุจูู ุฅูุฌุงุฏ ุงูุฃุฎุทุงุก ูุชุฌูุจ ุงูุฅูุฌุงุจูุงุช ุงูุฒุงุฆูุฉ.

## ูู ุงูุฃุตูุงู ุฅูู ุงูุฎุทุงูุงุช {#from-classes-to-hooks}

### ููู ุชุชูุงูู ุชูุงุจุน ุฏูุฑุฉ ุงูุญูุงุฉ ูุน ุงูุฎุทุงูุงุชุ {#how-do-lifecycle-methods-correspond-to-hooks}

* `constructor`: ูุง ุชุญุชุงุฌ ููููุงุช ุฏุงูุฉ ุฅูู ุจุงูู. ููููู ุชููุฆุฉ ุงูุญุงูุฉ ุนุจุฑ ุงุณุชุฏุนุงุก ุงูุฎุทุงู [`useState`](/docs/hooks-reference.html#usestate).  ุฅู ูุงู ุญุณุงุจูุง ูุดูู ุนุจุฆูุง ุนูู ุงูุฃุฏุงุกุ ูููููู ุชูุฑูุฑ ุฏุงูุฉ ุฅูู `useState`.

* `getDerivedStateFromProps`: ุชุญู ููุงู ุฌุฏููุฉ ุชุญุฏูุซู [ุฃุซูุงุก ุงูุชุตููุฑ.](#how-do-i-implement-getderivedstatefromprops) instead.

* `shouldComponentUpdate`: ุงุทูุน ุนูู `React.memo` [ูู ุงูุฃุณูู.](#how-do-i-implement-shouldcomponentupdate).

* `render`: ูุฐุง ุงูุชุงุจุน ูู ุฌุณู ูููู ุงูุฏุงูุฉ ููุณูุง.

* `componentDidMount`, `componentDidUpdate`, `componentWillUnmount`: ูุญู [ุงูุฎุทุงู useEffect](/docs/hooks-reference.html#useeffect) ููุงู ูุฐู ุงูุชูุงุจุน ุจุดุชู ุฃุดูุงู ุฏูุฌูุง ูุน ุจุนุถูุง (ุจูุง ูููุง [ุงูุญุงูุงุช](#can-i-skip-an-effect-on-updates) [ุงููุงุฏุฑุฉ](#can-i-run-an-effect-only-on-updates)).

* `componentDidCatch` ู `getDerivedStateFromError`: ููุณ ููุงูู ุฃู ุฎุทุงู ููุงูุฆ ููุฐูู ุงูุชุงุจุนูู ุจุนุฏุ ูููู ุณููุถูุงู ูู ุงููุฑูุจ ุงูุนุงุฌู.

### ููู ูููููู ุฃู ุฃุญุตู ุนูู ูุนููุงุช ุจูุงุณุทุฉ ุงูุฎุทุงูุงุชุ {#how-can-i-do-data-fetching-with-hooks}

ุฅููู [ุนุฑุถ ุชุฌุฑูุจู ุตุบูุฑ](https://codesandbox.io/s/jvvkoo8pq3) ูุชุจุฏุฃ ุจู. ููุนุฑูุฉ ุงููุฒูุฏ, ุฑุงุฌุน ูุฐุง [ุงูููุงู](https://www.robinwieruch.de/react-hooks-fetch-data/) ุญูู ุฌูุจ ุงูุจูุงูุงุช ุจุงุณุชุฎุฏุงู ุงูุฎุตุงูุงุช.

### ูู ููุงูู ุดูุก ุดุจูู ุจูุชุบูุฑุงุช ุงููุณุฎุฉุ {#is-there-something-like-instance-variables}

ูุนู. ุงูุฎุทุงู  [`()useRef`](/docs/hooks-reference.html#useref) ููุณ ูุฎุตุต ููุฑุงุฌุน DOM ููุท. ุงููุงุฆู "ref" ูู ุญุงููุฉ ุนุงูุฉ (generic container)ุ ุฅุฐ ุงูุฎุงุตูุฉ `current` ููู ูุงุจูุฉู ููุชุนุฏูู ูุชุณุชุทูุน ุชุฎุฒูู ุฃูุฉ ูููุฉ ุจุดูู ูุดุงุจู ููุณุฎุฉ ุฃูุฉ ุฎุงุตูุฉ ูู ุตูู ูุง. ููููู ุงููุตูู ุฅูููุง ูู ุฏุงุฎู

ููููู ุงููุตูู ุฅูููุง ูู ุฏุงุฎู `useEffect`:

```js{2,8}
function Timer() {
  const intervalRef = useRef();

  useEffect(() => {
    const id = setInterval(() => {
      // ...
    });
    intervalRef.current = id;
    return () => {
      clearInterval(intervalRef.current);
    };
  });

  // ...
}
```

ุฅู ุฃุฑุฏูุง ุถุจุท ูุชุฑุฉ ุฒูููุฉ (interval)ุ ูู ูุญุชุงุฌ ุฅูู ุงููุฑุฌุน `ref` (ุงูููุนุฑููู `id` ูููู ุฃู ูููู ูุญููููุง ูุณุจุฉู ููุชุฃุซูุฑ)ุ ูููู ูู ุงููููุฏ ูู ุฃุฑุฏูุง ุชุตููุฑ ุงููุชุฑุฉ ุงูุฒูููุฉ ูู ุฏุงุฎู ูุนุงูุฌ ุงูุญุฏุซ:

```js{3}
  // ...
  function handleCancelClick() {
    clearInterval(intervalRef.current);
  }
  // ...
```

ูุธุฑูููุงุ ููููู ุฃู ุชุชุฎูู ุงููุฑุงุฌุน ููุฃููุง ูุดุงุจูุฉ ููุชุบูุฑุงุช ูุณุฎุฉ ูู ุฃู ุตูู. ุฅู ูู ุชูู ุชูุฌุฑูู ุนูููุฉ ุชููุฆุฉ ูุณููุฉุ ุชุฌูุจ ุถุจุท ุงููุฑุงุฌุน ุฃุซูุงุก ุงูุชุตููุฑุ ุฅุฐ ูููู ุฃู ูุคุฏู ุฐูู ุฅูู ุณููู ููุงุฌุฆ. ุนูุถ ุฐููุ ูุฏ ุชุฑุบุจ ูู ุชุนุฏูู ุงููุฑุงุฌุน ูู ูุนุงูุฌุงุช ุงูุญุฏุซ ูุงูุชุฃุซูุฑุงุช.

### ูู ูุฌุจ ุฃู ุงุณุชุนูู ูุชุบูุฑ ุญุงูุฉ ูุงุญุฏ ุฃู ุนุฏุฉ ูุชุบูุฑุงุชุ {#should-i-use-one-or-many-state-variables}

ุฅู ููุช ูุงุฏููุง ูู ุงูุฃุตูุงูุ ูุฏ ุชููู ุฅูู ุงุณุชุฏุนุงุก `useState()` ูุฑุฉู ูุงุญุฏุฉู ุฏูููุง ููุถุน ุฌููุน ุงูุญุงูุงุช ูู ูุงุฆู ูุงุญุฏ. ูุง ุดู ุฃูููู ุชุณุชุทูุน ูุนู ุฐูู ุฅู ููุช ุชุฑุบุจ ูู ุฐูู. ุฅููู ูุซุงูู ุนู ูููู ูุชุจุน ุญุฑูุฉ ูุคุดุฑ ุงููุฃุฑุฉุ ุฅุฐ ูุจูู ููุถุนู ูุญุฌูู ูู ุงูุญุงูุฉ ุงููุญููุฉ:

```js
function Box() {
  const [state, setState] = useState({ left: 0, top: 0, width: 100, height: 100 });
  // ...
}
```

ุงูุขูุ ูููู ุฃููุง ูุฑูุฏ ูุชุงุจุฉ ุฌุฒุก ูู ุดููุฑุฉ ุชุบูููุฑ `left` ู `top` ุนูุฏูุง ูุญุฑู ุงููุณุชุฎุฏู ูุคุดุฑ ุงููุฃุฑุฉ. ูุงุญุธ ููู ูุชูุฌุจ ุนูููุง ุฏูุฌ ูุฐูู ุงูุญูููู ูู ูุงุฆู ุงูุญุงูุฉ ุงูุณุงุจูุฉ ูุฏููููุง:

```js{4,5}
  // ...
  useEffect(() => {
    function handleWindowMouseMove(e) {
      // ุนุฏู ููุฏุงู ุงูุงุฑุชูุงุน ูุงูุนุฑุถ "...state" ูุชุฃูุฏ ุจูุดุฑ
      setState(state => ({ ...state, left: e.pageX, top: e.pageY }));
    }
    // ููุงุญุธุฉ: ูุฐุง ูุชูููุฐ ุจุณูุท ุฌุฏูุง
    window.addEventListener('mousemove', handleWindowMouseMove);
    return () => window.removeEventListener('mousemove', handleWindowMouseMove);
  }, []);
  // ...
```

ูุฐุง ุจุณุจุจุจ ุฃูููู ุงุณุชุจุฏููุง ูููุฉ ูุชุบูุฑ ุญุงูุฉ ุนูุฏูุง ุญุฏุซูุงูุง. ูุฐุง ุงูุฃูุฑ ูุฎูู ุนู this.setState ูู ุงูุฃุตูุงู ุงูุชู ุชุฏูุฌ ุงูุญููู ุงููุญุฏููุซุฉ

ุนูู ุฃู ุญุงูุ ููุตู ุจุฏููุง ูู ุฐูู ุจุชูุณูู ุงูุญุงูุฉ ุฅูู ูุชุบูุฑุงุช ุญุงูุฉ ูุชุนุฏุฏุฉ ุงุนุชูุงุฏูุง ุนูู ุงูููู ุงูุชู ุชุชุบูุฑ ุณููุฉู

ุนูู ุณุจูู ุงููุซุงูุ ููููุง ุชูุณูู ุญุงูุฉ ุงููููู ุงูุฎุงุต ุจูุง ุฅูู ุงููุงุฆููู `position` ู `size`ุ ูุงุณุชุจุฏุงู `position` ุฏูู ุงูุญุงุฌุฉ ููุฏูุฌ:

```js{2,7}
function Box() {
  const [position, setPosition] = useState({ left: 0, top: 0 });
  const [size, setSize] = useState({ width: 100, height: 100 });

  useEffect(() => {
    function handleWindowMouseMove(e) {
      setPosition({ left: e.pageX, top: e.pageY });
    }
    // ...
```

ูุตู ูุชูุบุฑุงุช ุญุงูุฉ ูุณุชููุฉ ูู ูุงุฆุฏุฉู ุฃุฎุฑู ูู ุชุณููู ุงุณุชุฎุฑุงุฌ ุฌุฒุก ูู ูุชุฑุงุจุท ูู ุงูุดููุฑุฉ ุฅูู ุฎุทุงู ูุฎุตุต ูุงุญููุง ูุซู:

```js{2,7}
function Box() {
  const position = useWindowPosition();
  const [size, setSize] = useState({ width: 100, height: 100 });
  // ...
}

function useWindowPosition() {
  const [position, setPosition] = useState({ left: 0, top: 0 });
  useEffect(() => {
    // ...
  }, []);
  return position;
}
```

ูุงุญุธ ููู ูุงู ุจุฅููุงููุง ููู ุงูุงุณุชุฏุนุงุก `useState` ูู ูุชุบูุฑ ุงูุญุงูุฉ `position` ูุงูุชุฃุซูุฑ ุงููุฑุชุจุท ุจู ุฅูู ุฎุทุงู ูุฎุตุต ุฏูู ุชุบููุฑ ุงูุดููุฑุฉ. ุฅู ูุงูุช ุฌููุน ูุชุบูุฑุงุช ุงูุญุงูุฉ ูู ูุงุฆู ูุงุญุฏุ ูุณููุตุนูุจ ุงุณุชุฎุฑุงุฌูุง.

ูุถุน ุฌููุน ูุชุบูุฑุงุช ุงูุญุงูุฉ ูู ุงุณุชุฏุนุงุก ูุงุญุฏ ููุฎุทุงู  `useState`,  ูุงุณุชุฏุนุงุก `useState` ุจูู ุญูู ุฃูุฑุงู ูููู ุชุทุจููููุง ุจุดูู ุตุญูุญ. ุชููู ุงูููููุงุช ูุชููู ุฃูุซุฑ ูุงุจููุฉ ูููุฑุงุกุฉ ุนูุฏ ุชุญููู ุงูุชูุงุฒู ุจูู ูุฐูู ุงููููุถููุ ูุชุฌููุน ูู ูุง ูุฑุชุจุท ุจุงูุญุงูุฉ ูู ุจุถุนุฉ ูุชุบูุฑุงุช ุญุงูุฉ ูุณุชููุฉ. ุฅู ุฃุตุจุญุช ุดููุฑุฉ ุงูุญุงูุฉ ูุนูุฏุฉุ ููุตู [ุจุฅุฏุงุฑุชูุง ุจุงุณุชุนูุงู ูุฎูุถ](/docs/hooks-reference.html#usereducer) ุฃู ุฎุทุงู ูุฎุตุต.

### ูู ูููููู ุชูููุฐ ุชุฃุซูุฑ ุนูุฏ ุฅุฌุฑุงุก ุงูุชุญุฏูุซุงุช ููุทุ {#can-i-run-an-effect-only-on-updates}

ุชุนุฏูู ูุฐู ุงูุญุงูุฉ ูุงุฏุฑุฉ ุงูุงุณุชุนูุงู. ุฅู ุงุญุชุฌุช ุฅูููุงุ ููููู ุงุณุชุนูุงู [ูุฑุฌุนู ูุงุจู ููุชุนุฏูู](#is-there-something-like-instance-variables) ูุชุฎุฒูู ูููุฉ ููุทููุฉ ูุฏููููุง ุชุดูุฑ ุฅูููุง ุฅูู ูููู ูู ุฃูู ุนูููุฉ ุชุตููุฑ ุฃู ูู ุนูููุฉ ุชุตููุฑ ุชุงููุฉ ุซู ุงูุชุญูู ูู ูุฐู ุงูุฑุงูุฉ ูู ุงูุชุฃุซูุฑ ุงูุฎุงุต ุจู. (ุฅู ูุฌุฏุช ููุณู ูุนุชุงุฏูุง ุนูู ูุนู ูุฐุง ุงูุฃูุฑุ ููููู ุฃู ุชูุดุฆ ุฎุทุงููุง ูุฎุตุตูุง ูุฐูู.)

### ููู ูููู ุฌูุจ ุงูุฎุงุตูุฉ ุฃู ุงูุญุงูุฉ ุงูุณุงุจูุฉุ {#how-to-get-the-previous-props-or-state}

ูู ุงูููุช ุงูุญุงููุ ููููู ูุนู ุฐูู ูุฏููููุง ุจุงุณุชุนูุงู [ูุฑุฌุน](#is-there-something-like-instance-variables):

```js{6,8}
function Counter() {
  const [count, setCount] = useState(0);

  const prevCountRef = useRef();
  useEffect(() => {
    prevCountRef.current = count;
  });
  const prevCount = prevCountRef.current;

  return <h1>Now: {count}, before: {prevCount}</h1>;
}
```

ูุฏ ุชุจุฏู ูุฐู ุงูุนูููุฉ ูุนูุฏุฉู ุจุนุถ ุงูุดูุก ูููู ููููู ุงุณุชุฎุฑุงุฌูุง ุฅูู ุฎุทุงู ูุฎุตุต:

```js{3,7}
function Counter() {
  const [count, setCount] = useState(0);
  const prevCount = usePrevious(count);
  return <h1>Now: {count}, before: {prevCount}</h1>;
}

function usePrevious(value) {
  const ref = useRef();
  useEffect(() => {
    ref.current = value;
  });
  return ref.current;
}
```

ูุงุญุธ ููู ุณูุนูู ูุฐุง ูู ุฃุฌู ุงูุฎุงุตูุงุชุ ุฃู ุงูุญุงูุงุชุ ุฃู ุฃูุฉ ูููุฉ ุฃุฎุฑู ูุญุณูุจุฉ:

```js{5}
function Counter() {
  const [count, setCount] = useState(0);

  const calculation = count * 100;
  const prevCalculation = usePrevious(calculation);
  // ...
```

ูุงุฑุฏู ูู ุงููุณุชูุจู ุฃู ุชููุฑ React ุฎุทุงููุง ูุฏุนู `usePrevious` ูุซููุง ููุนู ุฐููุ ุฅุฐ ูุฐุง ุงูุณููู ุดุงุฆุน ูุณุจููุง.

ุงูุธุฑ ุฃูุถูุง [ุฅูู ุงูุณุคุงู ุงูุชุงูู ููุงุทูุงุน ุนูู ุงูููุท ุงูููุตู ุจู ูู ุฃุฌู ุงูุญุงูุฉ ุงููุดุชูุฉ.](#how-do-i-implement-getderivedstatefromprops).

### ููุงุฐุง ุฃุฑู ุงูุฎุตุงุฆุต ูุฏููุฉ ุฃู ุงูุญุงูุฉ ุฏุงุฎู ุงูุฏุงูุฉุ {#why-am-i-seeing-stale-props-or-state-inside-my-function}

ุฃู ุฏุงูุฉ ุฏุงุฎู ูููู ุ ุจูุง ูู ุฐูู ูุนุงูุฌุงุช ุงูุฃุญุฏุงุซ ูุงูุชุฃุซูุฑุงุช ุ "ุชุฑู" ุงูุฎุตุงุฆุต ูุงูุญุงูุฉ ูู ุชุตููุฑ ุงูุฐู ุชู ุฅูุดุงุคู ููู. ุนูู ุณุจูู ุงููุซุงู ุ ุฃูุธุฑ ุฅูู ุดููุฑุฉ ุงูุชุงููุฉ:

```js
function Example() {
  const [count, setCount] = useState(0);

  function handleAlertClick() {
    setTimeout(() => {
      alert('You clicked on: ' + count);
    }, 3000);
  }

  return (
    <div>
      <p>You clicked {count} times</p>
      <button onClick={() => setCount(count + 1)}>
        Click me
      </button>
      <button onClick={handleAlertClick}>
        Show alert
      </button>
    </div>
  );
}
```

ุฅุฐุง ููุฑุช ุฃููุงู ุนูู "ุฅุธูุงุฑ ุงูุชูุจูู" ุซู ููุช ุจุฒูุงุฏุฉ ุงูุนุฏุงุฏ ุ ูุณูุธูุฑ ุงูุชูุจูู ุงููุชุบูุฑ `count` **ูู ุงูููุช ุงูุฐู ููุช ููู ุจุงูููุฑ ููู ุงูุฒุฑ "ุฅุธูุงุฑ ุงูุชูุจูู"**.  ูุฐุง ูููุน ุงูุฃุฎุทุงุก ุงููุงุชุฌุฉ ุนู ุงูููุฏ ุจุงูุชุฑุงุถ ุฃู ุงูุฎุตุงุฆุต ูุงูุญุงูุฉ ูุง ุชุชุบูุฑ.

ุฅุฐุง ููุช ุชุฑูุฏ ูุฑุงุฆุฉ *ุขุฎุฑ* ุญุงูุฉ ูู ุจุนุถ ุฑุฏ ุงูุงุชุตุงู ุบูุฑ ูุชุฒุงูู ุนู ูุตุฏุ ููููู ุงูุงุญุชูุงุธ ุจู ูู [ูุฑุฌุน](/docs/hooks-faq.html#is-there-something-like-instance-variables), ุชุญูููู ุ ููุฑุงุกุฉ ููู.

ุฃุฎูุฑูุง , ููุงู ุณุจุจ ุขุฎุฑ ูุญุชูู ูุฑุฃูุชู ุงูุฎุตุงุฆุต ุงููุฏููุฉ ุฃู ุงูุญุงูุฉ, ูู ุฅุฐุง ููุช ุชุณุชุฎุฏู ุชุญุณูู " ุงูุชุจุนูุฉ ุงููุตูููุฉ" ููููู ูู ุชุญุฏุฏ ุฌููุน ุงูุชุจุนูุงุช ุจุดูู ุตุญูุญ. ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ุญุฏุฏ ุงูุชุฃุซูุฑ `[]` ุงููุณูุทุฉ ุงูุซุงููุฉ ูููู ููุฑุฃ `someProp` ูู ุงูุฏุงุฎู ุ ูุณูู ูุญุชูุธ ุจูโ ุฑุคูุฉ โุงููููุฉ ุงูุฃูููุฉ ูู` someProp`. ุงูุญู ูู ุฅุฒุงูุฉ ุตููู ุงูุชุจุนูุฉ ุฃู ุฅุตูุงุญู. ูู ููุง [ููู ููููู ุงูุชุนุงูู ูุน ุงูุฏูุงู](#is-it-safe-to-omit-functions-from-the-list-of-dependencies),  ูููุง [ุงุณุชุฑุงุชูุฌูุงุช ุดุงุฆุนุฉ ุฃุฎุฑู](#what-can-i-do-if-my-effect-dependencies-change-too-often) ย ูุชุดุบูู ุงูุชุฃุซูุฑุงุช ูู ูุซูุฑ ูู ุงูุฃุญูุงู ุฏูู ุชุฎุทู ุงูุชุจุนูุงุช ุจุดูู ุบูุฑ ุตุญูุญ.

>ููุงุญุธุฉ
>
> ูุญู ููุฏู [`exhaustive-deps`](https://github.com/facebook/react/issues/14920) ูุงุนุฏุฉ ESLint ูุฌุฒุก ูู ุญุฒูุฉ [`eslint-plugin-react-hooks`](https://www.npmjs.com/package/eslint-plugin-react-hooks#installation). ูุญุฐุฑ ุนูุฏูุง ูุชู ุชุญุฏูุฏ ุงูุชุจุนูุงุช ุจุดูู ุบูุฑ ุตุญูุญ ูููุชุฑุญ ุฅุตูุงุญ.

### ููู ุฃููููุฐ `getDerivedStateFromProps`ุ {#how-do-i-implement-getderivedstatefromprops}

ุฑุบู ุฃูููู [ูู ุชุญุชุงุฌ ุฅููู](/blog/2018/06/07/you-probably-dont-need-derived-state.html) ุนูู ุงูุฃุฑุฌุญุ ูููููู ูู ุญุงูุงุช ูุงุฏุฑุฉ ูุนู ุฐูู (ูุซู ุชูููุฐ ุงููููู`<Transition>`) ุนุจุฑ ุชุญุฏูุซ ุงูุญุงูุฉ ุจุดูู ุตุญูุญ ุฃุซูุงุก ุนูููุฉ ุงูุชุตููุฑ. ุณุชุนูุฏ React ุชูููุฐ ุงููููู ูุน ุงูุญุงูุฉ ุงููุญุฏููุซุฉ ูุจุงุดุฑุฉู ุจุนุฏ ุงูุฎุฑูุฌ ูู ุฃูู ุนูููุฉ ุชุตููุฑุ ูุฐุง ูู ูุคุซุฑ ุฐูู ุนูู ุงูุฃุฏุงุก.

ูู ุงูุดููุฑุฉ ุงูุชุงููุฉุ ูุฎุฒููู ุงููููุฉ ุงูุณุงุจูุฉ ููุฎุงุตูุฉ `row` ูู ูุชุบูุฑ ุญุงูุฉุ ููููููุง ุจุฐูู ุฅุฌุฑุงุก ุนูููุฉ ููุงุฒูุฉ:

```js
function ScrollView({row}) {
  let [isScrollingDown, setIsScrollingDown] = useState(false);
  let [prevRow, setPrevRow] = useState(null);

  if (row !== prevRow) {
    // isScrollingDown ุชุบูุฑุช ููุฐ ุฃุฎุฑู ุนูููุฉ ุชุตููุฑ. ุญุฏููุซ  row ุงูุฎุงุตูุฉ
    setIsScrollingDown(prevRow !== null && row > prevRow);
    setPrevRow(row);
  }

  return `Scrolling down: ${isScrollingDown}`;
}
```

ูุฏ ูุจุฏู ุฐูู ุบุฑูุจูุง ูู ุงูุจุฏุงูุฉุ ูููู ุฅุฌุฑุงุก ุชุญุฏูุซ ุฃุซูุงุก ุงูุชุตููุฑ ูู ูุง ูุดุจู ุณููู `getDerivedStateFromProps` ุชูุงููุง ูู ุงููุงุญูุฉ ุงููุธุฑูุฉ.

### ูู ููุฌุฏ ุดูุก ูุดุจู forceUpdateุ {#is-there-something-like-forceupdate}

ูุญุงูุธ ุงูุฎุทุงูุงู `useState` ู `useReducer` ููุงููุง ุนูู ุงูุญุงูุฉ ุนูุฏ [ุฅุฌุฑุงุก ุชุญุฏูุซ](/docs/hooks-reference.html#bailing-out-of-a-state-update) ุนูููุง ูู ุญุงู ูุงูุช ุงููููุฉ ุงูุชุงููุฉ ูู ููุณ ุงููููุฉ ุงูุณุงุจูุฉ. ุชุบููุฑ ุงูุญุงูุฉ ูุฏููููุง (in place) ูุงุณุชุฏุนุงุก ุงูุฎุทุงู `useState` ูู ูุคุฏู ุฅูู ุฅุนุงุฏุฉ ุงูุชุตููุฑ.

ุจุดูู ุทุจูุนูุ ูุง ูุฌุจ ุนููู ุชุนุฏูู ุญุงูุฉ ูุญููุฉ ูู React. ุนูู ุฃู ุญุงู ูููุฎุฑุฌ ูุฑูุจุ ููููู ุงุณุชุนูุงู ุนุฏุงุฏ ูุชุฒุงูุฏ ูุฅุฌุจุงุฑ ุฅุฌุฑุงุก ุฅุนุงุฏุฉ ุงูุตููุฑ ุญุชู ุฅู ูู ุชุชุบูุฑ ุงูุญุงูุฉ:

```js
  const [ignored, forceUpdate] = useReducer(x => x + 1, 0);

  function handleClick() {
    forceUpdate();
  }
```

ุญุงูู ุชุฌูุจ ูุฐู ุงูููุท ูุฏุฑ ุงููุณุชุทุงุน.

### ุฃูููููู ุฅูุดุงุก ูุฑุฌุน ุฅูู ูููู ุฏุงูุฉุ {#can-i-make-a-ref-to-a-function-component}

ุฑุบู ุฃููู ูุง ูุฌุจ ุฃู ุชุญุชุงุฌ ุฅูู ุชูููุฐ ุฐูู ูู ุฃุบูุจ ุงูุฃุญูุงูุ ูุฏ ุชุนุฑุถ ุจุนุถ ุงูุชูุงุจุน ุงูุฃูุฑูุฉ ุนูู ูููู ุฃุจ (parent component) ูุน ุงูุฎุทุงู [`useImperativeHandle`](/docs/hooks-reference.html#useimperativehandle).

### ููู ูููููู ููุงุณ ุนูุฏุฉ DOMุ {#how-can-i-measure-a-dom-node}

ูู ุฃุฌู ููุงุณ ููุถุน ุฃู ุญุฌู ุนูุฏุฉ DOM ุ ููููู ุงุณุชุฎุฏุงู [ูุฑุฌุน ุฑุฏ ุงููุฏุงุก](/docs/refs-and-the-dom.html#callback-refs). ุชุณุชุฏุนู React ุฑุฏ ุงููุฏุงุก ูุฐุง ูููุง ุชู ุฑุจุท ุงููุฑุฌุน ุจุนูุฏุฉ ูุฎุชููุฉ. ููุง [ุนุฑุถ ุตุบูุฑ](https://codesandbox.io/s/l7m0v5x4v9):

```js{4-8,12}
function MeasureExample() {
  const [height, setHeight] = useState(0);

  const measuredRef = useCallback(node => {
    if (node !== null) {
      setHeight(node.getBoundingClientRect().height);
    }
  }, []);

  return (
    <>
      <h1 ref={measuredRef}>Hello, world</h1>
      <h2>The above header is {Math.round(height)}px tall</h2>
    </>
  );
}
```

ูู ูุฎุชุงุฑ `useRef` ูู ูุฐุง ุงููุซุงู ูุฃู ูุฑุฌุน ูุงุฆู ูุง ูุฎุทุฑูุง ุจุดุฃู * ุงูุชุบููุฑุงุช * ูู ูููุฉ ุงููุฑุฌุน ุงูุญุงููุฉ. ุจุงุณุชุฎุฏุงู ุงููุฑุฌุน ุฑุฏ ุงููุฏุงุก ูุถูู ุฐูู [ุญุชู ูู ุนุฑุถ ุฃุญุฏ ุงูุนูุงุตุฑ ุงูุชุงุจุนุฉ ุงูุนูุฏุฉ ุงูููุงุณุฉ ูุงุญููุง](https://codesandbox.io/s/818zzk8m78) (e.g. in response to a click), ูุง ุฒููุง ูุชููู ุฅุดุนุงุฑูุง ุจุฐูู ูู ุงููููู ุงูุฑุฆูุณู ููููููุง ุชุญุฏูุซ ุงูููุงุณุงุช.

ูุงุญุธ ุฃููุง ูููู ุจุชูุฑูุฑ `[]` ููุตูููุฉ ุชุจุนูุฉ ุฅูู ` useCallback ` . ูุฐุง ูุถูู ุฃู ุฑุฏ ุงููุฏุงุก ุงููุฑุฌุนู ุงูุฎุงุต ุจูุง ูุง ูุชุบูุฑ ุจูู ุนูููุงุช ุฅุนุงุฏุฉ ุงูุชุตููุฑ ุ ูุจุงูุชุงูู ูุฅู React ูู ููุงุฏููุง ุจุดูู ุบูุฑ ุถุฑูุฑู.

ููููู ุงุฐุง ุงุฑุฏุช [ุงุณุชุฎุฑุงุฌ ูุฐุง ุงูููุทู](https://codesandbox.io/s/m5o42082xy) ูู ุฎุทุงู ูุงุจูุฉ ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู:

```js{2}
function MeasureExample() {
  const [rect, ref] = useClientRect();
  return (
    <>
      <h1 ref={ref}>Hello, world</h1>
      {rect !== null &&
        <h2>The above header is {Math.round(rect.height)}px tall</h2>
      }
    </>
  );
}

function useClientRect() {
  const [rect, setRect] = useState(null);
  const ref = useCallback(node => {
    if (node !== null) {
      setRect(node.getBoundingClientRect());
    }
  }, []);
  return [rect, ref];
}
```

### ูุง ุงูุฐู ูุนููู `const [thing, setThing] = useState()`ุ {#what-does-const-thing-setthing--usestate-mean}

ุฅู ูู ุชูู ูุฐู ุงูุตูุงุบุฉ ูุฃูููุฉ ูุฏููุ ุงุทูุน ุนูู ุงูุดุฑุญ ุงููุฐููุฑ ูู [ูุฐุง ุงููุณู](/docs/hooks-state.html#tip-what-do-square-brackets-mean) ูู ุชูุซูู ุฎุทุงู ุงูุญุงูุฉ.

## ุชุญุณููุงุช ุงูุฃุฏุงุก {#performance-optimizations}

### ุฃูููููู ุชุฎุทู ุชุฃุซูุฑ ูุง ูู ุนูููุงุช ุงูุชุญุฏูุซุ {#can-i-skip-an-effect-on-updates}

ูุนู. ุงุทูุน ุนูู ูุณู [ุชูููุฐ ุชุฃุซูุฑ ุดุฑุทูููุง](/docs/hooks-reference.html#conditionally-firing-an-effect). ูุงุญุธ ุฃููู ูุณูุงู ูุนุงูุฌุฉ ุชุญุฏูุซุงุช ูููุฏ ุบุงูุจูุง ุฃุฎุทุงุกุ ุฅุฐ ูุฐุง ูู ุณุจุจ ุนุฏู ููู ูุฐุง ุงูุณููู ูู ุงูุณููู ุงูุงูุชุฑุงุถู.

### ูู ูู ุงูุขูู ุญุฐู ุงูุฏูุงู ูู ูุงุฆูุฉ ุงูุชุจุนูุงุชุ {#is-it-safe-to-omit-functions-from-the-list-of-dependencies}

ุจุดูู ุนุงู ุ ูุง.

```js
function Example({ someProp }) {
  function doSomething() {
    console.log(someProp);
  }

  useEffect(() => {
    doSomething();
  }, []); // ๐ด This is not safe (it calls `doSomething` which uses `someProp`)
}
```

ูู ุงูุตุนุจ ุชุฐูุฑ ุงูุฏุนุงุฆู ุฃู ุงูุญุงูุฉ ุงูุชู ุชุณุชุฎุฏููุง ุงููุธุงุฆู ุฎุงุฑุฌ ุงูุชุฃุซูุฑ. ููุฐุง ุงูุณุจุจ ุนุงุฏุฉู ูุง ุชุฑูุฏ ุงูุฅุนูุงู ุนู ุงููุธุงุฆู ุงูุชู ูุชุทูุจูุง ุชุฃุซูุฑ ุจุฏุงุฎููุง. ุจุนุฏ ุฐูู ุ ูู ุงูุณูู ูุนุฑูุฉ ุงูููู ูู ูุทุงู ุงููููู ุงูุฐู ูุนุชูุฏ ุนูู ูุฐุง ุงูุชุฃุซูุฑ:

```js
function Example({ someProp }) {
  useEffect(() => {
    function doSomething() {
      console.log(someProp);
    }

    doSomething();
  }, [someProp]); // โ OK (our effect only uses `someProp`)
}
```

ุฅุฐุง ูู ูุณุชุฎุฏู ุจุนุฏ ุฐูู ุฃู ููู ูู ูุทุงู ุงููููู ุ ููู ุงูุขูู ุชุญุฏูุฏ `[]`:

```js
useEffect(() => {
  function doSomething() {
    console.log('hello');
  }

  doSomething();
}, []); // โ OK in this example because we don't use *any* values from component scope
```

ุจูุงุกู ุนูู ุญุงูุฉ ุงูุงุณุชุฎุฏุงู ุงูุฎุงุตุฉ ุจู ุ ููุงู ุนุฏุฏ ูููู ูู ุงูุฎูุงุฑุงุช ุงูููุถุญุฉ ุฃุฏูุงู.

>ููุงุญุธุฉ
>
> ูุญู ููุฏู [`exhaustive-deps`](https://github.com/facebook/react/issues/14920) ูุงุนุฏุฉ ESLint ูุฌุฒุก ูู ุญุฒูุฉ [`eslint-plugin-react-hooks`](https://www.npmjs.com/package/eslint-plugin-react-hooks#installation). ูุญุฐุฑ ุนูุฏูุง ูุชู ุชุญุฏูุฏ ุงูุชุจุนูุงุช ุจุดูู ุบูุฑ ุตุญูุญ ูููุชุฑุญ ุฅุตูุงุญ.

ุฏุนูุง ูุฑู ููุงุฐุง ูุฐุง ููู.

ุฅุฐุง ููุช ุจุชุญุฏูุฏ [ูุงุฆูุฉ ุงูุชุจุนูุงุช](https://reactjs.org/docs/hooks-reference.html#conditionally-firing-an-effect) ูุนุงูู ุฃุฎูุฑ ู `useEffect`, `useMemo`, `useCallback`, ุฃู `useImperativeHandle`, ูุฌุจ ุฃู ุชุชุถูู ุฌููุน ุงูููู ุงููุณุชุฎุฏูุฉ ุฏุงุฎู ุงููุดุงุฑูุฉ ูู ุชุฏูู ุจูุงูุงุช React. ูุชุถูู ุงูุฏุนุงุฆู ูุงูุฏููุฉ ูุฃู ุดูุก ูุณุชูุฏ ูููุง.

ูููู ูู ุงูุขูู ุญุฐู ูุธููุฉ ูู ูุงุฆูุฉ ุงูุชุจุนูุฉ ุฅุฐุง ูู ููู ุฃู ูููุง (ุฃู ุงููุธุงุฆู ุงูุชู ุชุณูู ุจูุง) ูุดูุฑ ุฅูู ุงูุฏุนุงุฆู ุฃู ุงูุญุงูุฉ ุฃู ุงูููู ุงููุณุชูุฏุฉ ูููุง. ูุญุชูู ูุฐุง ุงููุซุงู ุนูู ุฎุทุฃ:

```js
function ProductPage({ productId }) {
  const [product, setProduct] = useState(null);

  async function fetchProduct() {
    const response = await fetch('http://myapi/product' + productId); // Uses productId prop
    const json = await response.json();
    setProduct(json);
  }

  useEffect(() => {
    fetchProduct();
  }, []); // ๐ด Invalid because `fetchProduct` uses `productId`
  // ...
}
```

**ุงูุฅุตูุงุญ ุงูููุตู ุจู ูู ููู ูุฐู ุงููุธููุฉ ุฏุงุฎู ุชุฃุซูุฑู.** ูุฐุง ูุฌุนู ูู ุงูุณูู ูุนุฑูุฉ ุงูุฏุนุงุฆู ุฃู ุงูุญุงูุฉ ุงูุชู ูุณุชุฎุฏููุง ุงูุชุฃุซูุฑ ุงูุฎุงุต ุจู ุ ูุงูุชุฃูุฏ ูู ุฅุนูุงููุง ุฌููุนูุง:

```js
function ProductPage({ productId }) {
  const [product, setProduct] = useState(null);

  useEffect(() => {
    // By moving this function inside the effect, we can clearly see the values it uses.
    async function fetchProduct() {
      const response = await fetch('http://myapi/product' + productId);
      const json = await response.json();
      setProduct(json);
    }

    fetchProduct();
  }, [productId]); // โ Valid because our effect only uses productId
  // ...
}
```

ูุณูุญ ูู ูุฐุง ุฃูุถูุง ุจูุนุงูุฌุฉ ุงูุงุณุชุฌุงุจุงุช ุบูุฑ ุงููุฑุชุจุฉ ูุน ูุชุบูุฑ ูุญูู ุฏุงุฎู ุงูุชุฃุซูุฑ:

```js
 useEffect(() => {
    let ignore = false;
    async function fetchProduct() {
      const response = await fetch('http://myapi/product/' + productId);
      const json = await response.json();
      if (!ignore) setProduct(json);
    }
    
    fetchProduct();
    return () => { ignore = true };
  }, [productId]);
```

ููุฏ ููููุง ุงููุธููุฉ ุฏุงุฎู ุงูุชุฃุซูุฑ ุญุชู ูุง ุชููู ูู ูุงุฆูุฉ ุงูุชุจุนูุฉ.

> Tip
>
> ุชุญูู ูู ูุฐุง [ุงูุนุฑุถ ุงูุชูุถูุญู ุงูุตุบูุฑ](https://codesandbox.io/s/jvvkoo8pq3) ู [ูุฐู ุงูููุงูุฉ](https://www.robinwieruch.de/react-hooks-fetch-data/) ููุนุฑูุฉ ุงููุฒูุฏ ุญูู ุฌูุจ ุงูุจูุงูุงุช ูุน ุฎุทูุงุช.

**ุฅุฐุง ูู ุชุชููู ูู ููู ูุธููุฉ ุฏุงุฎู ุชุฃุซูุฑ ูุง ูุณุจุจ ูุง ุ ูููุงู ุจุนุถ ุงูุฎูุงุฑุงุช ุงูุฅุถุงููุฉ:*

* **ููููู ูุญุงููุฉ ููู ูุฐู ุงูุฏุงูุฉ ุฎุงุฑุฌ ุงููููู ุงูุฎุงุต ุจู.** ูู ูุฐู ุงูุญุงูุฉ ุ ุชููู ุงูุฏุงูุฉ ูุถูููุฉ ูุนุฏู ุงูุฅุดุงุฑุฉ ุฅูู ุฃู ููุงุฏ ุฏุนุงุฆูุฉ ุฃู ุญุงูุฉ ุ ููุง ุฃููุง ูุง ุชุญุชุงุฌ ุฅูู ุฃู ุชููู ูู ูุงุฆูุฉ ุงูุชุจุนูุงุช.
* ุฅุฐุง ูุงูุช ุงูุฏูุงู ุงูุชู ุชุชุตู ุจูุง ุนุจุงุฑุฉ ุนู ุญุณุงุจ ูุญุถ ูุขููุฉ ููุงุชุตุงู ุฃุซูุงุก ุงูุนุฑุถ ุ ููููู **ุงูุงุชุตุงู ุจูุง ุฎุงุฑุฌ ุงูุชุฃุซูุฑ ุจุฏูุงู ูู ุฐูู** ุ ูุฌุนู ุงูุชุฃุซูุฑ ูุนุชูุฏ ุนูู ุงููููุฉ ุงูุชู ุชู ุฅุฑุฌุงุนูุง.
* ูููุฌุฃ ุฃุฎูุฑ ุ ููููู **ุฅุถุงูุฉ ุฏุงูุฉ ููุชุฃุซูุฑ ุนูู ุงูุชุจุนูุงุช ูููู ูู ุชุนุฑูููุง** ูู ุฎุทุงู[useCallback](https://reactjs.org/docs/hooks-reference.html#usecallback). ูุฐุง ูุถูู ุฃูู ูุง ูุชุบูุฑ ูู ูู ุนุฑุถ ูุง ูู ุชุชุบูุฑ ุงูุชุจุนูุงุช ุงูุฎุงุตุฉ ุจู ุฃูุถูุง:

```js
function ProductPage({ productId }) {
  // โ Wrap with useCallback to avoid change on every render
  const fetchProduct = useCallback(() => {
    // ... Does something with productId ...
  }, [productId]); // โ All useCallback dependencies are specified

  return <ProductDetails fetchProduct={fetchProduct} />;
}

function ProductDetails({ fetchProduct })
  useEffect(() => {
    fetchProduct();
  }, [fetchProduct]); // โ All useEffect dependencies are specified
  // ...
}
```

ูุงุญุธ ุฃููุง ูู ุงููุซุงู ุฃุนูุงู **ูุญุชุงุฌ ** ุฅูู ุงูุงุญุชูุงุธ ุจ ุงูุฏูุงู ูู ูุงุฆูุฉ ุงูุชุจุนูุงุช. ูุฐุง ูุถูู ุฃู ุฃู ุชุบููุฑ ูู `productId` prop ู `ProductPage` ูุคุฏู ุชููุงุฆููุง ุฅูู ุฅุนุงุฏุฉ ุชุนููู ูู ูููู `ProductDetails`.

### ูุงุฐุง ุฃูุนู ุฅุฐุง ุชุบูุฑุช ุชุจุนูุงุช ุงูุชุฃุซูุฑ ุงูุฎุงุตุฉ ุจู ูุซูุฑูุงุ {#what-can-i-do-if-my-effect-dependencies-change-too-often}

ูู ุจุนุถ ุงูุฃุญูุงู ุ ูุฏ ูููู ุชุฃุซูุฑู ูุณุชุฎุฏู ุงูุญุงูุฉ ุงูุชู ุชุชุบูุฑ ูุซูุฑูุง. ูุฏ ุชููู ุฅูู ุฅุบูุงู ูุฐู ุงูุญุงูุฉ ูู ูุงุฆูุฉ ุงูุชุจุนูุงุช ุ ููู ูุฐุง ูุคุฏู ุนุงุฏุฉ ุฅูู ุงูุฃุฎุทุงุก:

```js
function Counter() {
  const [count, setCount] = useState(0);

  useEffect(() => {
    const id = setInterval(() => {
      setCount(count + 1); // This effect depends on the `count` state
    }, 1000);
    return () => clearInterval(id);
  }, []); // ๐ด Bug: `count` is not specified as a dependency

  return <h1>{count}</h1>;
}
```

ูุฌููุนุฉ ูุงุฑุบุฉ ูู ุงูุชุจุนูุงุช, `[]`, ูุนูู ุฃู ุงูุชุฃุซูุฑ ูู ูุนูู ุฅูุง ูุฑุฉ ูุงุญุฏุฉ ุนูุฏูุง ูุฑูุจ ุงููููู, ู ููุณ ุนูุฏ ุฅุนุงุฏุฉ ุงูุชุตููุฑ. ุงููุดููุฉ ูู ุฃูู ุฏุงุฎู ุฏุงุฎู ุฏุงูุฉ ุงูุฅุณุชุฑุฌุงุน `setInterval` callback, ูุฅู ูููุฉ `count` ูู ุชุชุบูุฑ, ูุฃููุง ุฃูุดุฃูุง ุฅุบูุงููุง ุจูููุฉ `count` ุงูุชู ูุงูุช ูุถุจูุทุฉ ุนูู 0 ููุง ูุงู ุชุฃุซูุฑ ุงูุฅุณุชุฑุฌุงุน ูุนูู. ูู ุซุงููุฉ ุ ุซู ูุนุงูุฏุฉ ุงูุฅุณุชุฏุนุงุก `setCount(0 + 1)`, ูุฐูู ุงูุนุฏ ูุง ูุชุฌุงูุฒ 1.

ุชุญุฏูุฏ `[count]` ููุงุฆูุฉ ุงูุชุจุนูุงุช ูู ุดุฃูู ุฅุตูุงุญ ุงูุฎูู, ูููู ูู ุดุฃูู ุฃู ูุณุจุจ ุงููุงุตู ุงูุฒููู ูุฅุนุงุฏุฉ ุชุนููู ุนูู ูู ุชุบููุฑ. ุนูู ูุญู ูุนุงู ุ ูู `setInterval` ุณูู ุชุญุตู ุนูู ูุฑุตุฉ ูุงุญุฏุฉ ููุชูููุฐ ูุจู ุฃู ูุชู ุชุทููุฑูุง (ููุงุซูุฉ ู `setTimout`.) ูุฐุง ูุฏ ูุง ูููู ูุฑุบูุจุง ููู. ูุฅุตูุงุญ ูุฐุง ุ ูููููุง ุงุณุชุฎุฏุงู[ุดูู ุงูุชุญุฏูุซ ุงูุฏุงูุฉ ูู setState](https://reactjs.org/docs/hooks-reference.html#functional-updates). ูุชูุญ ููุง ุชุญุฏูุฏ ููููุฉ ุชุบููุฑ ุงูุญุงูุฉ ุฏูู ุงูุฑุฌูุน ุฅูู ุงูุญุงูุฉ ุงูุญุงููุฉ:

```js
function Counter() {
  const [count, setCount] = useState(0);

  useEffect(() => {
    const id = setInterval(() => {
      setCount(c => c + 1); // โ This doesn't depend on `count` variable outside
    }, 1000);
    return () => clearInterval(id);
  }, []); // โ Our effect doesn't use any variables in the component scope

  return <h1>{count}</h1>;
}
```

(ูููุฉ ุงูุฏุงูุฉ `setCount` ูุถููู ุฃู ูููู ูุณุชูุฑูุง ุจุญูุซ ูููู ูู ุงูุขูู ุฅููุงูู.)

ุงูุขู ุ ุฏุงูุฉ ุงูุฅุณุชุฑุฌุงุน `setInterval` ุณุชููุฐ ูุฑุฉ ูุงุญุฏุฉ, ูููู ูู ูู ูุฑุฉ ูุชู ุฅุณุชุฏุนุงุก ุงูุฏุงุฎููุฉ `setCount` ูููู ุงุณุชุฎุฏุงู ูููุฉ ูุญุฏุซุฉ ูู `count` (ุชุณูู ูู ูุฐู ุฏุงูุฉ ุงูุฅุณุชุฑุฌุงุน  `c`.)

ูู ุญุงูุงุช ุฃูุซุฑ ุชุนููุฏุง (ูุซู ุฅุฐุง ูุงูุช ุฅุญุฏู ุงูุญุงูุฉ ุชุนุชูุฏ ุนูู ุฏููุฉ ุฃุฎุฑู), ุญุงูู ููู ููุทู ุชุญุฏูุซ ุงูุญุงูุฉ ุฎุงุฑุฌ ุงูุชุฃุซูุฑ ูุน [useReducer Hook](https://reactjs.org/docs/hooks-reference.html#usereducer). [ูุฐู ุงูููุงูุฉ](https://adamrackis.dev/state-and-use-reducer/) ููุฏู ูุซุงููุง ุนูู ููููุฉ ุงูููุงู ุจุฐูู. **ูููุฉ ูุธููุฉ ุงูุฅุฑุณุงู ูู useReducer ูุณุชูุฑุฉ ุฏุงุฆููุง** โ ุญุชู ูู ุชู ุงูุฅุนูุงู ุนู ุงูุฏุงูุฉ ุงููุฎูุถ ุฏุงุฎู ุงููููู ููุฑุงุกุฉ ุงูุฏุนุงุฆู ุงูุฎุงุตุฉ ุจู.

ูููุงุฐ ุฃุฎูุฑ ุ ุฅุฐุง ููุช ุชุฑูุฏ ุดูุก ูู `this` ุฏุงุฎู ุงูุตูู, ููููู [ุงุณุชุฎุฏุงู ุงููุฑุฌุน](https://reactjs.org/docs/hooks-faq.html#is-there-something-like-instance-variables) ูุนูุฏ ูุชุบูุฑ ูุงุจูุฉ ููุชุบููุฑ. ุซู ููููู ุงููุชุงุจุฉ ูุงููุฑุงุกุฉ ุฅูููุง. ููุซูุง:

```js
function Example(props) {
  // Keep latest props in a ref.
  let latestProps = useRef(props);
  useEffect(() => {
    latestProps.current = props;
  });

  useEffect(() => {
    function tick() {
      // Read latest props at any time
      console.log(latestProps.current);
    }

    const id = setInterval(tick, 1000);
    return () => clearInterval(id);
  }, []); // This effect never re-runs
}
```

ูู ุจุฐูู ููุท ุฅุฐุง ุชุนุฐุฑ ุนููู ุงูุนุซูุฑ ุนูู ุจุฏูู ุฃูุถู ุููุง ุฃู ุงูุงุนุชูุงุฏ ุนูู ุงูุทูุฑุฉ ูุฌุนู ุงูููููุงุช ุฃูู ูุงุจููุฉ ููุชูุจุค ุจูุง.ุฅุฐุง ูุงู ููุงู ููุท ูุนูู ูุง ูุชุฑุฌู ุจุดูู ุฌูุฏ ุ [ููููู ุชุจูุบ ุนูู](https://github.com/facebook/react/issues/new) ูุน ูุซุงู ู ุดููุฑุฉ runnable  ููููููุง ุฃู ูุญุงูู ุงููุณุงุนุฏุฉ

### ููู ูููููู ุชูููุฐ `shouldComponentUpdate`ุ {#how-do-i-implement-shouldcomponentupdate}

ููููู ุชุบููู ูููู ุฏุงูุฉ ูุน `React.memo` ูููุงุฒูุฉ ุฎุงุตูุงุชู ุจุดูู ุณุทุญู:

```js
const Button = React.memo((props) => {
  // ุงููููู ุงูุฎุงุต ุจู
});
```

ูุฐุง ููุณ ุฎุทุงููุง ูุฃูููู ูู ูููุดูุฃ ุจุงูุดูู ุงูุฐู ุชููุดูุฃ ููู ุงูุฎุทุงูุงุช. ุฅููู `React.memo` ููุงูุฆ `PureComponent` ูููู ููุงุฒู ุงูุฎุงุตูุงุช ููุท. (ููููู ุฃูุถูุง ุฃู ุชุถูู ูุณูุทูุง ุขุฎุฑ ูุชุญุฏูุฏ ุฏุงูุฉ ููุงุฒูุฉ ูุฎุตุตุฉ ุชุฃุฎุฐ ุงูุฎุงุตูุงุช ุงููุฏููุฉ ูุงูุฌุฏูุฏุฉ. ุฅู ุฃุนุงุฏุช ุงููููุฉ `true`ุ ูุณููุชุฎุทููู ุงูุชุญุฏูุซ.)

ูุง ููุงุฒู `React.memo` ุงูุญุงูุฉ ูุนุฏู ูุฌูุฏ ูุงุฆู ุญุงูุฉ ูุญูุฏ ูููุงุฒูุชู. ูุน ุฐููุ ููููู ุฌุนู ุงูุฃุจูุงุก ูู ุญุงูุฉ ูููุฉ (pure) ุฃูุถูุง ุฃู ุญุชู ุชุญุณูู ุงุจูู ูุงุญุฏู ูุน `useMemo`.


### ููู ูููู ุงุณุชุธูุงุฑ (memoize) ุงูุนูููุงุช ุงูุญุณุงุจูุฉุ {#how-to-memoize-calculations}

ููููููู ุงูุฎุทุงู [`useMemo`](/docs/hooks-reference.html#usememo) ูู ุชุฎุฒูู ุงูุญุณุงุจุงุช ุจูู ุนุฏุฉ ุนูููุงุช ุชุตููุฑ ุนุจุฑ "ุชุฐูุฑ" ุงููููุฉ ุงูุชู ุฌุฑู ุญุณุงุจูุง ูุณุจููุง:

```js
const memoizedValue = useMemo(() => computeExpensiveValue(a, b), [a, b]);
```

ุชุณุชุฏุนู ูุฐู ุงูุดููุฑุฉ `computeExpensiveValue(a, b)`. ูููู ุฅู ูู ุชุชุบูุฑ ุงููุฏุฎูุงุช `[a, b]` ููุฐ ุขุฎุฑ ูููุฉุ ุณูุชุฎุทู ุงูุฎุทุงู `useMemo` ุงุณุชุฏุนุงุกูุง ูู ุงููุฑุฉ ุงูุชุงููุฉ ููุนูุฏ ุงุณุชุนูุงู ุขุฎุฑ ูููุฉ ุฃุนุงุฏุชูุง ุชูู ุงูุฏุงูุฉ.

ุชุฐูุฑ ุฃููู ุงูุฏุงูุฉ ุงููููุฑููุฑุฉ ุฅูู  `useMemo` ุชูููููุฐ ุฃุซูุงุก ุนูููุฉ ุงูุชุตููุฑ. ูุง ุชูุนู ุฃู ุดูุก ูู ูุฐู ุงูุฃุซูุงุก ูู ุชูู ูุชูุนูู ุจุดูู ุทุจูุนู ุฎูุงู ุนูููุฉ ุงูุชุตููุฑ. ุนูู ุณุจูู ุงููุซุงูุ ุงูุชุฃูุซูุฑุงุช ุงูุฌุงูุจูุฉ ุชุชุจุน ููุฎุทุงู `useEffect` ูููุณ ููุฎุทุงู `useMemo`.

**ููููู ุงูุงุนุชูุงุฏ ุนูู ุงูุฎุทุงู `useMemo` ูุชุญุณูู ุงูุฃุฏุงุกุ ูููุณ ูุถูุงู ุงูุฏูุงูุงุช (semantic guarantee).** ูู ุงููุณุชูุจูุ ูุฏ ุชุฎุชุงุฑ React ุจุฃู "ุชูุณู" ุจุนุถ ุงูููู ุงูููุณุชุธููุฑุฉ (ุงููุญููุธุฉ) ูุชุนูุฏ ุญุณุงุจูุง ูู ุฌุฏูุฏ ูู ุนูููุฉ ุงูุชุตููุฑ ุงูุชุงููุฉ ูุฐูู ูุชุญุฑูุฑ ุงูุฐุงูุฑุฉ ูููููุงุช ุบูุฑ ุธุงูุฑุฉ ุนูู ุงูุดุงุดุฉ (offscreen) ูุซููุง. ุงูุชุจ ุฃูููุง ุดููุฑุชู ูุชุนูู ุจุดูู ุตุญูุญ ุฏูู ุงูุฎุทุงู `useMemo`ุ ููู ุซููู ุฃุถูู ูุชุญุณูู ุงูุฃุฏุงุก. (ูู ุญุงูุงุช ูุงุฏุฑุฉ ุนูุฏูุง ูุง ูุฌุจ ุญุณุงุจ ูููุฉ ูุทูููุงุ ููููู ุญููุฆุฐู ุชููุฆุฉ ูุฑุฌุน ุจุดูู ูุณูู.)

ุฃุถู ุฅูู ุฐูู ุฃููู ุงูุฎุทุงู `useMemo` ููููููู ุจุณูููุฉ ูู ุชุฎุทู ุนูููุฉ ุฅุนุงุฏุฉ ุชุตููุฑ ูุงุจู ุชุณุชูุฒู ุงูุฃุฏุงุก:

```js
function Parent({ a, b }) {
  // ููุท `a` ุฃุนุฏ ุนูููุฉ ุงูุชุตููุฑ ุฅู ุชุบูุฑ:
  const child1 = useMemo(() => <Child1 a={a} />, [a]);
  // ููุท `b` ุฃุนุฏ ุนูููุฉ ุงูุชุตููุฑ ุฅู ุชุบูุฑ:
  const child2 = useMemo(() => <Child2 b={b} />, [b]);
  return (
    <>
      {child1}
      {child2}
    </>
  )
}
```

ูุงุญุธ ุฃููู ูุฐุง ุงูุฃุณููู ูู ูุนูู ูู ุญููุฉ ุชูุฑุงุฑ ูุฃูููู ูุง ูููู ุฃู ุชูุถุน ุงุณุชุฏุนุงุกุงุช ุงูุฎุทุงูุงุช ุฏุงุฎู ุญููุฉ ุชูุฑุงุฑ. ุนูู ุฃู ุญุงูุ ุชุณุชุทูุน ุงุณุชุฎุฑุงุฌ ูููู ูููุตู ูุนูุตุฑ ุงููุงุฆูุฉ ูุงุณุชุฏุนุงุก `useMemo` ููุงูู.

### ููู ูููู ุฅูุดุงุก ูุงุฆูุงุช ูุณุชูุฒูุฉ ููุฃุฏุงุก ุจุดูู ูุณููุ {#how-to-create-expensive-objects-lazily}

ููููููู ุงูุฎุทุงู `useMemo` ูู ุงุณุชุธูุงุฑ [(memoize) ุนูููุฉ ุญุณุงุจูุฉ ูุณุชูููุฉ ููุฃุฏุงุก](#how-to-memoize-calculations) ุฅู ุจููุช ุงููุฏุฎูุงุช ููุณูุง ุฏูู ุชุบูููุฑ. ูุน ุฐููุ ูุนุฏูู ูุฐุง ุจูุซุงุจุฉ ุชูููุญ ููุทุ ููุง ููุฌุฏ ุฃู ุดูุก ูุถูู ุนุฏู ุชูุฑุงุฑ ุชูููุฐ ุงูุนูููุฉ ุงูุญุณุงุจูุฉ. ุนูู ุฃูุฉ ุญุงูุ ุชุญุชุงุฌ ุฃุญูุงููุง ุฅูู ุงูุชุฃูุฏ ูู ุฅูุดุงุก ูุงุฆูู ูุฑุฉู ูุงุญุฏุฉู ููุท.

**ุฃูู ุญุงูุฉ ุงุณุชุนูุงู ุดุงุฆุนุฉ ูู ุนูุฏ ุงุณุชููุงู ุนูููุฉ ุฅูุดุงุก ุงูุญุงูุฉ ุงูุฃูููุฉ ููุฃุฏุงุก ุจุดูู ูุจูุฑ:**

```js
function Table(props) {
  // โ๏ธ ูู ูู ุนูููุฉ ุชุตููุฑ createRows() ูุณุชุฏุนู
  const [rows, setRows] = useState(createRows(props.count));
  // ...
}
```

ูุชุฌูุจ ุฅุนุงุฏุฉ ุฅูุดุงุก ุงูุญุงูุฉ ุงูุฃูููุฉ ุงูููููุฉุ ูููููุง ุชูุฑูุฑ ุฏุงูุฉ ุฅูู `useState`:

```js
function Table(props) {
  // โ ูุฑุฉ ูุงุญุฏุฉ ููุท createRows() ูุณุชุฏุนู
  const [rows, setRows] = useState(() => createRows(props.count));
  // ...
}
```

ุณุชุณุชุฏุนู React ูุฐู ุงูุฏุงูุฉ ุฎูุงู ุนูููุฉ ุฃูู ุนูููุฉ ุชุตููุฑ. ููุฒูุฏ ูู ุงูุชูุงุตููุ ุงุฑุฌุน ุฅูู ุชูุซูู[ุงููุงุฌูุฉ ุงูุจุฑูุฌูุฉ ููุฎุทุงู `useState`](/docs/hooks-reference.html#usestate).

**ูู ุจุนุถ ุงูุฃุญูุงูุ ุฑุจูุง ุชุฑุบุจ ุจุชุฌูุจ ุฅุนุงุฏุฉ ุฅูุดุงุก ุงูุญุงูุฉ ุงูุฃูููุฉ ููุฎุทุงู `()useRef`.** ุนูู ุณุจูู ุงููุซุงูุ ุฑุจูุง ุชุฑูุฏ ุงูุชุฃูุฏ ูู ุฅูุดุงุก ุจุนุถ ูุณุฎ ุงูุฃุตูุงู ุงูุฃูุฑูุฉ (imperative class instance) ูุฑุฉู ูุงุญุฏุฉู ููุท:

```js
function Image(props) {
  // โ๏ธ ูู ูู ุนูููุฉ ุชุตููุฑ IntersectionObserver ูููุดูุฃ
  const ref = useRef(new IntersectionObserver(onIntersect));
  // ...
}
```

ูุง ููุจู ุงูุฎุทุงู `useRef` ุฏุงูุฉ ูุฎุตุตุฉ ุฅุถุงููุฉ ูุซู ุงูุฎุทุงู `useState`. ุนูุถ ุฐููุ ุชุณุชุทูุน ูุชุงุจุฉ ุฏุงูุฉ ูุฎุตุตุฉ ุชููุดุฆูุง ูุชุถุจุทูุง ุจุดูู ูุณูู:

```js
function Image(props) {
  const ref = useRef(null);

  // โ ููุฑุฉู ูุงุญุฏุฉู ุจูููุณูู IntersectionObserver ูููุดูุฃ
  function getObserver() {
    let observer = ref.current;
    if (observer !== null) {
      return observer;
    }
    let newObserver = new IntersectionObserver(onIntersect);
    ref.current = newObserver;
    return newObserver;
  }

  // ุนูุฏูุง ุชุญุชุงุฌ ุฅููู getObserver() ุงุณุชุฏุนู
  // ...
}
```

ุจุฐููุ ุชุชุฌูุจ ุฅูุดุงุก ูุงุฆูุงุช ูุณุชูููุฉ ููุฃุฏุงุก ุญุชู ุงูุญุงุฌุฉ ุงููุงุณุฉ ุฅูููุง ูููุฑุฉ ุงูุฃููู. ุฅู ููุช ุชุณุชุนูู Flow ุฃู TypeScriptุ ุชุณุชุทูุน ุฃูุถูุง ุฃู ุชุนุทู `getObserver()`โ ููุนูุง ุบูุฑ ูุนุฏูู (non-nullable type) ููุณูููุฉ.


### ูู ุชุชุณู ุงูุฎุทุงูุงุช ุจุงูุจุทุฆ ูุฅูุดุงุฆูุง ุฏูุงููุง ูู ุนูููุฉ ุงูุชุตููุฑุ{#are-hooks-slow-because-of-creating-functions-in-render}

ูุง. ูู ุงููุชุตูุญุงุช ุงูุญุฏูุซุฉุ ูุง ูุฎุชูู ุงูุฃุฏุงุก ุงูุตุงูู (raw performance) ูููุบููุงุช (closures) ุจููุงุฒูุชู ูุน ุงูุฃุตูุงู ุงุฎุชูุงููุง ูุจูุฑูุง ุจุงุณุชุซูุงุก ุงูุญุงูุงุช ุงููุจุงูุบ ุจูุง.

ุฅุถุงูุฉู ูุฐููุ ูุนุฏูู ุชุตููู ุงูุฎุทุงูุงุช ุฃูุซุฑ ูุนุงููุฉ ูู ูุงุญูุชูู ููุง:

* ุชุฎูุตุช ุงูุฎุทุงูุงุช ูู ุงููุซูุฑ ูู ุงูุฃุนุจุงุก ุงูุชู ุชุทูุจูุง ุงูุฃุตูุงู ูุซู ุนุจุก ุทูุจ ุฅูุดุงุก ููุณุฎู ููุตูู ูุฑุจุท ูุนุงูุฌุงุช ุญุฏุซ ุจุงูุจุงูู.

* **ูุง ุชุญุชุงุฌ ุงูุดููุฑุฉ ุงูุงุตุทูุงุญูุฉ (Idiomatic code) ุงูุชู ุชุณุชุนูู ุงูุฎุทุงูุงุช ุฅูู ุงูุชุดุนุจ ุงูุนููู ูุดุฌุฑุฉ ุงูููููุงุช (deep component tree nesting)**  ุงูุณุงุฆุฏ ูู ููุงุนุฏ ุงูุดููุฑุฉ (codebases) ุงูุชู ุชุณุชุนูู ุงููููุงูุงุช ุฐุงุช ุงูุชุฑุชูุจ ุงูุฃุนููุ ูุฎุงุตููุงุช ุงูุชุตููุฑุ ูุงูุณูุงู. ูุน ุดุฌุฑุฉ ููููุงุช ุตุบูุฑุฉุ ูููู ูุฏู React ุงููููู ูู ุงูุนูู ูุฅูุฌุงุฒู.

ุชูููุฏูููุงุ ุงููุฎุงูู ุงูุชู ุชุฏูุฑ ุญูู ุงูุฏูุงู ุงูุณุทุฑูุฉ (inline functions) ูุชุฃุซูุฑูุง ุนูู ุงูุฃุฏุงุก ูู React ุชุชุนูู ุจููููุฉ ุชูุฑูุฑ ุฑุฏูุฏ ุงููุฏุงุก ุงูุฌุฏูุฏุฉ ูู ูู ุชุตููุฑ ููุตู ุชุญุณููุงุช `shouldComponentUpdate` ูู ุงูููููุงุช ุงูุฃุจูุงุก. ุชุชุนุงูู ุงูุฎุทุงูุงุช ูุน ูุฐู ุงููุดููุฉ ูู ุซูุงุซ ููุงุญู ูู:

* ููููููู ุงูุฎุทุงู [`useCallback`](/docs/hooks-reference.html#usecallback) ูู ุงูุฅุจูุงุก ุนูู ูุฑุฌุน ุฑุฏ ุงููุฏุงุก ููุณู ุจูู ุนูููุงุช ุฅุนุงุฏุฉ ุงูุชุตููุฑุ ูุฐุง ูุณุชูุฑ `shouldComponentUpdate` ุจุงูุนูู:

    ```js{2}
	// `b` ุฃู `a` ูู ูุชุบูุฑ ุฅูุง ุฅุฐุง ุชุบูุฑ
    const memoizedCallback = useCallback(() => {
      doSomething(a, b);
    }, [a, b]);
    ```

* ูุฌุนู [ุงูุฎุทุงู `useMemo`](/docs/hooks-faq.html#how-to-memoize-calculations) ุนูููุฉ ุงูุชุญูู ุณููุฉู ุนูุฏูุง ููุฌุฑูู ุชุญุฏูุซ ุงุจูู ูุงุญุฏูุ ููุง ูููู ูู ุงูุญุงุฌุฉ ุฅูู ููููุงุช ูููุฉ (pure components).

* ุฃุฎูุฑูุงุ ูููู ุงูุฎุทุงู `useReducer` ุงูุญุงุฌุฉ ุฅูู ุชูุฑูุฑ ุฑุฏูุฏ ูุฏุงุก ุนูููุฉ ููุง ุณููุดุฑูุญ ุฐูู ูู ุงูุฃุณูู.

### ูุง ูู ุงูุณุจูู ูุชุฌูุจ ุชูุฑูุฑ ุฑุฏูุฏ ุงููุฏุงุก ููุฏุงุฎูุ {#how-to-avoid-passing-callbacks-down}

ูุฌุฏูุง ุฃููู ุฃุบูุจ ุงูุฃุดุฎุงุต ูุง ูุญุจูู ุชูุฑูุฑ ุฑุฏูุฏ ุงููุฏุงุก ูุฏูููุง ุนุจุฑ ูู ูุณุชูู ูู ุดุฌุฑุฉ ุงููููู. ุฑุบู ุฃููู ุงูุนูููุฉ ูุงุถุญุฉ ุฅูุง ุฃููููุง ุฃุดุจู ุจุนูููุฉ ุชุฑููุจ ุดุจูุฉ ูู ุงูุฃูุงุจูุจ ุงููุชุดุนุจุฉ (ุฃูุงุจูุจ ุดุจูุฉ ุงูููุงู ูุงูุตุฑู ูุซููุง).

ูู ุดุฌุฑุงุช ุงููููู ุงููุจูุฑุฉุ ุงูุจุฏูู ุงูุฐู ููุตู ุจู ูู ุชูุฑูุฑ ุงูุฏุงูุฉ `dispatch` ููุฏุงุฎู (down) ูู [`useReducer`](/docs/hooks-reference.html#usereducer) ุนุจุฑ ุงูุณูุงู:

```js{4,5}
const TodosDispatch = React.createContext(null);

function TodosApp() {
  // ูู ุชุชุบูุฑ ุจูู ุนูููุงุช ุฅุนุงุฏุฉ ุงูุชุตููุฑ `dispatch` ุงูุฏุงูุฉ
  const [todos, dispatch] = useReducer(todosReducer);

  return (
    <TodosDispatch.Provider value={dispatch}>
      <DeepTree todos={todos} />
    </TodosDispatch.Provider>
  );
}
```

ุฃู ุงุจู ูู ุงูุดุฌุฑุฉ ุฏุงุฎู `TodosApp` ูููู ุฃู ูุณุชุฎุฏู ุงูุฏุงูุฉ `dispatch` ูุชูุฑูุฑ ุฃุญุฏุงุซ (actions) ููุฃุนูู ุญุชู ุชุตู ุฅูู `TodosApp`:

```js{2,3}
function DeepChild(props) {
  // ูู ุงูุณูุงู dispatch ุฅุฐุง ุฃุฑุฏูุง ุฃู ูููุฐ ุญุฏุซูุง ูุงุ ูููููุง ุฌูุจ
  const dispatch = useContext(TodosDispatch);

  function handleClick() {
    dispatch({ type: 'add', text: 'hello' });
  }

  return (
    <button onClick={handleClick}>Add todo</button>
  );
}
```

ูุฐุง ููุงุณุจู ุฃูุซุฑ ูู ูุงุญูุฉ ุงูุตูุงูุฉ (ูุง ุญุงุฌุฉ ููุงุณุชูุฑุงุฑ ุจุชูุฌูู ุฑุฏูุฏ ุงููุฏุงุก)ุ ููุฌูุจูุง ูู ุงููููุน ูู ูุดููุฉ ุฑุฏ ุงููุฏุงุก (callback problem) ูููููุง. ุชูุฑูุฑ `dispatch` ููุฃุณูู ุจุงูุดูู ุงูุฐู ูุถุญูุงู ูู ุงูููุท ุงูุฐู ููุตุญ ุจุงุชุจุงุนู ููุชุญุฏูุซุงุช ุงูุนูููุฉ.

ุงูุฌุฏูุฑ ุจุงูููุงุญุธุฉ ุฃูููู ูุง ูุฒุงู ุจุฅููุงูู ุงุฎุชูุงุฑ ุฅูููุง ุฅู ุชูุฑููุฑ ุญุงูุฉ ุงูุชุทุจูู (application state) ููุฃุณูู ูุซู ุงูุฎุงุตูุงุช (ุงูุฃูุซุฑ ูุถูุญูุง) ุฃู ูุซู ุงูุณูุงู (ุฃูุซุฑ ุณูููุฉู ููุชุญุฏูุซุงุช ุงูุนูููุฉ ุฌุฏูุง). ุฅู ููุช ุชุณุชุนูู ุงูุณูุงู ูุชูุฑูุฑ ุงูุญุงูุฉ ููุฃุณูู ุฃูุถูุงุ ุงุณุชุนูู ููุนุงู ูุฎุชููุงู ูู ุงูุณูุงูุ ุฅุฐ ูุง ูุชุบูุฑ ุงูุณูุงู `dispatch` ูุทูููุงุ ูุฐููุ ูุง ุชุญุชุงุฌ ุงูููููุงุช ุงูุชู ุชูุฑุฃู ููุชุตููุฑ ุฅูุง ุฅุฐุง ุงุญุชุงุฌุช ุฃูุถูุง ุฅูู ุญุงูุฉ ุงูุชุทุจูู.

### ููู ุชุฌุฑู ุนูููุฉ ูุฑุงุกุฉ ูููุฉ ุชุชุบูุฑ ูุซูุฑูุง ูู ุงูุฎุทุงู `useCallback`ุ {#how-to-read-an-often-changing-value-from-usecallback}

>ููุงุญุธุฉ
>
>ููุตู [ุจุชูุฑูุฑ `dispatch` ููุฃุณูู ูู ุงูุณูุงู](#how-to-avoid-passing-callbacks-down) ุจุฏููุง ูู ุฑุฏูุฏ ุงููุฏุงุก ุงููุฑุฏูุฉ ูู ุงูุฎุงุตูุงุช. ุงูุทุฑููุฉ ุงููุชุจุนุฉ ูู ุงูุฃุณูู ูุฐููุฑุฉ ููุง ููุท ูุชุชูุฉ ูููุฎุฑุฌ ูุฑูุจ (escape hatch).
>
>ูุงุญุธ ุฃูุถูุง ุฃู ูุฐุง ุงูููุท ูุฏ ูุณุจุจ ุญุฏูุซ ูุดุงูู ูู ุงููุถุน ุงููุชุฒุงูู [concurrent mode](/blog/2018/03/27/update-on-async-rendering.html). ูุฎุทุท ูุชูููุฑ ุจุฏุงุฆู ุฃูุถู ูู ุงููุณุชูุจูุ ูููู ุงูุญู ุงูุฃูุซุฑ ุฃูุงููุง ุงูุฃู ูู ุฅุจุทุงู ุฑุฏ ุงููุฏุงุก ุฏูููุง ุฅู ุชุบูุฑุช ุจุนุถ ุงูููู ุงูุชู ูุนุชูุฏ ุนูููุง.

ูู ุญุงูุงุช ูุงุฏุฑุฉุ ูุฏ ุชุญุชุงุฌ ุฅูู ุงุณุชุธูุงุฑ (memoize) ุฑุฏ ูุฏุงุก ูุน ุงูุฎุทุงู [`useCallback`](/docs/hooks-reference.html#usecallback) ูููู ุนูููุฉ ุงูุงุณุชุธูุงุฑ ูุง ุชุนูู ุจุดูู ุตุญูุญ ูุฃููู ุงูุฏุงูุฉ ุงูุฏุงุฎููุฉ ูุฌุจ ุฃู ูุนุงุฏ ุฅูุดุงุคูุง ูู ูุซูุฑ ูู ุงูุฃุญูุงู. ุฅู ูุงูุช ุงูุฏุงูุฉ ุงูุชู ุชุฑูุฏ ุงุณุชุธูุงุฑูุง ูู ูุนุงูุฌ ุญุฏุซ ููุง ุชุณุชุฎุฏู ุฃุซูุงุก ุงูุชุตููุฑุ ููููู ุงุณุชุนูุงู ูุฑุฌุน ููุชุบูุฑ ูุณุฎุฉุ ูุชุฎุฒูู ุขุฎุฑ ูููุฉ ูุญููุธุฉ ุถููู ูุฏูููุง:

```js{6,10}
function Form() {
  const [text, updateText] = useState('');
  const textRef = useRef();

  useLayoutEffect(() => {
    textRef.current = text; // ูุชุงุจุชูุง ุฅูู ุงููุฑุฌุน
  });

  const handleSubmit = useCallback(() => {
    const currentText = textRef.current; // ูุฑุงุกุชูุง ูู ุงููุฑุฌุน
    alert(currentText);
  }, [textRef]); // [text] ููุง ุณุชูุนู handleSubmit ูุง ุชุนูุฏ ุฅูุดุงุก

  return (
    <>
      <input value={text} onChange={e => updateText(e.target.value)} />
      <ExpensiveTree onSubmit={handleSubmit} />
    </>
  );
}
```

ูุฐุง ุงูููุท ูุนูุฏู ูุซูุฑูุง ูููู ูุจุฏู ุฃูููู ูุง ุจุฃุณ ูู ูุนู ุฐูู ููุฎุฑุฌ ูุฑูุจ ูุชุญุณูู ุงูุฃุฏุงุก ุฅู ุดุนุฑุช ุฃูู ุจุญุงุฌุฉ ุฅููู. ูุตุจุญ ุงูุชุนุงูู ูุน ูุฐุง ุงูููุท ุฃุณูู ูุฃูุซูุฑ ุชูุจููููุง ุฅู ุงุณุชุฎุฑุฌุชู ุฅูู ุฎุทุงู ูุฎุตุต:

```js{4,16}
function Form() {
  const [text, updateText] = useState('');
  // `text` ุณูุฌุฑู ุงุณุชุธูุงุฑู ุญุชู ูู ุชุบูุฑ:
  const handleSubmit = useEventCallback(() => {
    alert(text);
  }, [text]);

  return (
    <>
      <input value={text} onChange={e => updateText(e.target.value)} />
      <ExpensiveTree onSubmit={handleSubmit} />
    </>
  );
}

function useEventCallback(fn, dependencies) {
  const ref = useRef(() => {
    throw new Error('Cannot call an event handler while rendering.');
  });

  useLayoutEffect(() => {
    ref.current = fn;
  }, [fn, ...dependencies]);

  return useCallback(() => {
    const fn = ref.current;
    return fn();
  }, [ref]);
}
```

ูู ููุง ุงูุญุงูุชููุ ูุง ููุตุญ ุจุงุณุชุนูุงู ูุฐุง ุงูููุทุ ูุฏุงูุน ุฐูุฑู ููุง ูู ููุชูููุฉ ููุท. ุนูุถูุง ุนููุ ููุถู ุชุฌูุจ ุชูุฑูุฑ ุฑุฏูุฏ ูุฏุงุก ุจุดูู ุนููู ููุฃุณูู.


## ูุง ุฎูู ุงูุณุชุงุฑ {#under-the-hood}

### ููู ุชุฑุจุท React ุงุณุชุฏุนุงุกุงุช ุงูุฎุทุงูุงุช ูุน ุงูููููุงุชุ {#how-does-react-associate-hook-calls-with-components}

ุชุชุนูุจ React ุงูููููุงุช ููุฏ ุงูุชุตููุฑ ุจุงุณุชูุฑุงุฑ. ุจูุถู [ุงูููุงุนุฏ ุงููุฎุตุตุฉ ุจุงูุฎุทุงูุงุช](/docs/hooks-rules.html), ุฃุตุจุญูุง ูุนูู ููู ุชุณุชุฏูุนู ุชูู ุงูุฎุทุงูุงุช ูู ููููุงุช React (ุฃู ูู ุงูุฎุทุงูุงุช ุงููุฎุตุตุฉ ุงูุชู ุชูุณุชุฏุนูู ุฃูุถูุง ูู ููููุงุช React).

ููุงูู ูุงุฆูุฉ ุฏุงุฎููุฉ ูุฎูุงูุง ูู ุงูุฐุงูุฑุฉ ูุฑุชุจุทุฉ ูุน ูู ูููู. ูู ุนุจุงุฑุฉ ุนู ูุงุฆูุงุช JavaScript ูุณุชุทูุน ุฃู ูุถุน ูููุง ุจุนุถ ุงูุจูุงูุงุช. ุนูุฏูุง ุชุณุชุฏุนู ุฎุทุงููุง ูุซู `useState()`โุ ููุฑุฃ ุงูุฎููุฉ ุงูุญุงููุฉ (ุฃู ูููููุฆูุง ูู ุฃูู ุนูููุฉ ุชุตููุฑ)ุ ุซู ูุญุฑููู ุงููุคุดุฑ ุฅูู ุงูุฎููุฉ ุงูุชุงููุฉ. ูุฐุง ูู ุชูุณูุฑ ุญุตูู ูู ุงุณุชุฏุนุงุก ูู ุงุณุชุฏุนุงุกุงุช ุงูุฎุทุงู useState()โ ุญุงูุฉ ูุญููุฉ ูุณุชููุฉ.

### ูุง ูู ุงููุตุฏุฑ ุงูุฐู ุงุณุชููุช ูู ุงูุฎุทุงูุงุชุ{#what-is-the-prior-art-for-hooks}

ุงูุฎุทุงูุงุช ูู ููุฑุฉ ูุชุฑุงูุจุฉ ููุณุชูุงุฉ ูู ูุตุงุฏุฑ ูุฎุชููุฉ ูููุง:

* ุชุฌุฑุจุชูุง ุงููุณุจูุฉ ูุน ุงููุงุฌูุงุช ุงููุธูููุฉ ุงูุจุฑูุฌูุฉ (functional APIs) ูู ุงููุณุชูุฏุน [react-future](https://github.com/reactjs/react-future/tree/master/07%20-%20Returning%20State) repository.
* ุชุฌุงุฑุจ ูุฌุชูุน React ูุน ูุงุฌูุงุช ุฎุงุตูุงุช ุงูุชุตููุฑ ุงูุจุฑูุฌูุฉ ุจูุง ูููุง ุงููููู Reactions ุงูุฐู ูุฎุต [Ryan Florence](https://github.com/ryanflorence)'s [Reactions Component](https://github.com/reactions/component).
* ุงูุชุฑุงุญ [`adopt` ุงููููุฉ ุงูููุชุงุญูุฉ](https://gist.github.com/trueadm/17beb64288e30192f3aa29cad0218067) ุงูุชู ุงูุชุฑุญูุง [Dominic Gannaway](https://github.com/trueadm)'s ูุตูุงุบุฉ ุชุฌููููุฉ ูุฎุงุตูุงุช ุงูุชุตููุฑ.
* ูุชุบูุฑุงุช ุงูุญุงูุฉ ูุฎูุงูุง ุงูุญุงูุฉ ูู [DisplayScript](http://displayscript.org/introduction.html).
* ุงูููููุงุช Reducer ูู [Reducer components](https://reasonml.github.io/reason-react/docs/en/state-actions-reducer.html) ูู ReasonReact.
* [ุงูุงุดุชุฑุงูุงุช](http://reactivex.io/rxjs/class/es6/Subscription.js~Subscription.html) ูู  Rx.
* [ุงูุชุฃุซูุฑุงุช ุงูุฌุจุฑูุฉ](https://github.com/ocamllabs/ocaml-effects-tutorial#2-effectful-computations-in-a-pure-setting) ูู ูุบุฉ OCaml ูุชุนุฏุฏุฉ ุงูููู.

ุงุจุชูุฑ  [Sebastian Markbรฅge](https://github.com/sebmarkbage) ุงูุชุตููู ุงูุฃุณุงุณู ููุฎุทุงูุงุช ุซู ุฃุนูุฏ ุชูููุญ ูุตููู ูุงุญููุง ูู ูุจู [Andrew Clark](https://github.com/acdlite), [Sophie Alpert](https://github.com/sophiebits), [Dominic Gannaway](https://github.com/trueadm), aูุบูุฑูู ูู ุฃุนุถุงุก ูุฑูู React.
