---
id: hooks-intro
title: Introducing Hooks
permalink: docs/hooks-intro.html
next: hooks-overview.html
---

الخطافات هي إضافة جديدة إلى الإصدار 16.8 في React، إذ تسمح لك باستعمال ميزة الحالة وميزات React الأخرى دون كتابة أي صنف.

```js{4,5}
import React, { useState } from 'react';

function Example() {
  // "count" التصريح عن متغير حالة جديد سندعوه
  const [count, setCount] = useState(0);

  return (
    <div>
      <p>You clicked {count} times</p>
      <button onClick={() => setCount(count + 1)}>
        Click me
      </button>
    </div>
  );
}
```

الدالة `useState` الجديدة هذه هي أول خطاف (Hook) سنتطرق إليه، ولكن هذا المثال هو مجرد مثال تشويقي! لا تقلق إن لم يكن له أي معنى ولم تفهم منه شيئًا بعد.

**هذه الصفحة هي مدخل إلى الخطافات؛ وإذا أردت البدء بتعلم الخطافات، انتقل إلى [الصفحة التالية](/docs/hooks-overview.html).** سنكمل في هذه الصفحة شرح سبب إضافة الخطافات إلى React وكيف يمكن للخطافات أن تساعدك في كتابة تطبيقات قوية وضخمة.

>Note
>
> الإصدار 16.8.0 من React هو أول إصدار يدعم الخطافات. عند الترقية إليه، لا تنسَ تحديث جميع الحزم بما فيها React DOM. ستدعم ReactNative الخطافات في الإصدار المستقر القادم.

## فيديو تقديمي {#video-introduction}

فيReact Conf 2018  ، قدمت Sophie Alpert و Dan Abramov خطافات ، تليها Ryan Florence لشرح كيفية إعادة تشكيل تطبيق لاستخدامها. شاهد الفيديو هنا:

<br>

<iframe width="650" height="366" src="//www.youtube.com/embed/dpw9EHDh2bM" frameborder="0" allowfullscreen></iframe>

## ليس هنالك تغييرات مفصلية {#no-breaking-changes}

قبل إكمال القراءة، انتبه إلى أنَّ الخطافات:

* **اختيارية الاستعمال تمامًا.** تستطيع تجريب الخطافات ببضعة مكونات دون إعادة كتابة أية شيفرة مكتوبة مسبقًا. مع ذلك، أنت لست مضطرًا لتعلم الخطافات واستعمالها الآن إن لم تكن تريد ذلك أو لست بحاجة إليها في الوقت الحالي.
* **متوافقةٌ مع ما سبقها كليًّا.** لا تحوي الخطافات أية تغييرات مفصلية.
* **متاحةٌ الآن** أصبحت الخطافات متاحةً الآن بدءًا من الإصدار 16.8.0.

**الجدير بالذكر أنَّه ليس هنالك أي خطط لإزالة الأصناف من React.** يمكنك قراءة المزيد حول [خطة الاعتماد التدريجي](#gradual-adoption-strategy) للخطافات في الأسفل.

**لا تؤثر الخطافات على معرفتك بمفاهيم React.** بدلًا من ذلك، توفر الخطافات أكثر من واجهة برمجية مباشرة (direct API) إلى مفاهيم React التي تعرفت عليها مسبقًا مثل الخاصيات (props)، والحالة (state)، والسياق (context)، والمراجع (refs)، ودورة الحياة (lifecycle). كما سنشرح لاحقًا، توفر الخطافات أيضًا طريقة جديدة وقوية لدمج هذه المفاهيم مع بعضها.

**إن كنت تود البدء بتعلم الخطافات، يمكنك الانتقال مباشرةً إلى  [الصفحة التالية](/docs/hooks-overview.html)** على أي حال، ننصحك بإكمال القراءة إن كنت تريد معرفة سبب إضافة الخطافات وكيفية استخدامها دون إعادة كتابة التطبيقات من جديد.

## الحافز لإضافة الخطافات {#motivation}

تحل الخطافات نطاقًا واسعًا من الأخطاء التي تبدو من الظاهر أنها غير مترابطة في React والتي يمكن أن تواجهها حتى بعد خمس سنوات من كتابة ومراجعة عشرات الآلاف من المكونات. سواءً كنت تتعلم React، أو تستعلمها يوميًا، أو حتى كنت تفضل استعمال مكتبة أخرى مع نموذج مكونات مشابه، لابد من أن تواجه بعضًا من هذه المشكلات.

### من الصعب إعادة استعمال شيفرة ذات حالة بين المكونات {#its-hard-to-reuse-stateful-logic-between-components}

لا توفر React طريقةً لربط سلوك قابل لإعادة الاستعمال بمكوِّن (مثل ربطه بمتجر). إن كان لديك تجربةً مسبقةً مع React، فقد تكون الأنماط مألوفةً لديك مثل [خاصيات التصيير](/docs/render-props.html) و [المكونات ذات الترتيب الأعلى](/docs/higher-order-components.html) التي تحاول حل هذا الأمر. على أي حال، هذه الأنماط تتطلب منك إعادة هيكلة مكوناتك وجعل الشيفرة صعبة التتبع. إن ألقيت نظرةً على تطبيق React نموذجي في أدوات تطوير React (أي React DevTools)، فستجد غالبًا مغلفًا هائلًا (يدعى "wrapper hell") مُحاطًا بطبقات من المزودين، والمستهلكين، والمكونات ذات الترتيب الأعلى، وخاصيات التصيير، وغيرها. لمَّا كنا نستطيع [ترشيحها في أدوات التطوير](https://github.com/facebook/react-devtools/pull/503), فهذا يشير إلى مشكلة ضمنية أعمق: تحتاج React إلى أنواع أساسية أفضل لمشاركة شيفرة ذات حالة (stateful logic).

باستعمال الخطافات، يمكنك استخراج شيفرة ذات حالة من مكون، وبذلك يمكن التحقق منه بشكل مستقل وإعادة استعماله. تسمح لك الخطافات بإعادة استعمال الشيفرة ذات الحالة دون تغيير هرمية المكونات (component hierarchy). هذا الأمر يجعل من السهل مشاركة الخطافات مع العديد من المكونات أو مع المجتمع نفسه.

سنناقش هذا الأمر بمزيد من التفصيل في صفحة [بناء خطاف خاص بك](/docs/hooks-custom.html).

### المكونات المعقدة تصبح صعبة الفهم {#complex-components-become-hard-to-understand}

يتوجب علينا في كثير من الأحيان صيانة مكونات بدأت بشكل بسيط وما لبثت أن تحولت إلى كتلة من شيفرة ذات حالة يصعب السيطرة عليها مما يولد آثارًا جانبية. تحوي دورة حياة كل تابع غالبًا مزيجًا من الشيفرة عديمة الصلة. على سبيل المثال، قد تنفِّذ المكونات عملية جلب بعض البيانات في  `componentDidMount` و `componentDidUpdate`. مع ذلك، التابع `componentDidMount` نفسه قد يحوي أيضًا على بعض الشيفرات عديمة الصلة التي تضبط مستمعات حدث مع عملية تنظيف نُفذِّت في `componentWillUnmount`. الشيفرة المترابطة بشكل وثيق التي تغير كلاهما تنقسم إلى جزأين ولكن الشيفرة الغير مترابطة على الاطلاق ينتهي بها المطاف بالدمج في تابع واحد. هذا يسهِّل تولّد الأخطاء واجتماع التناقضات.

في معظم الحالات، يستحيل فصل هذه المكونات إلى أجزاء أصغر لأنَّ الشيفرة ذات الحالة هي في كل مكان. يصعب أيضًا اختبارها. هذا أحد أسباب تفضيل الكثير من الأشخاص دمج React مع مكتبة إدارة حالة منفصلة. على أي حال، ذلك يعرِّف الكثير من التجريد الذي يتطلب منك القفز بين الملفات، ويجعل إعادت استعمال المكونات أمرًا صعب الحصول.

لحل هذا الأمر، تسمح لك الخطافات بفصل مكون واحد إلى دوال أصغر بناءً على ترابط الأجزاء مع بعضها بعضًا (مثل إعداد اشتراك أو جلب بيانات) عوضًا عن إجبار الفصل استنادًا إلى توابع دورة الحياة. قد تختار أيضًا إدارة حالة المكونات المحلية مع مخفِّض (reducer) لجعلها أكثر قابلية للتنبؤ.

سنناقش هذا الموضوع بتفصيل أوسع في التوثيق [استعمال خطاف التأثير](/docs/hooks-effect.html#tip-use-multiple-effects-to-separate-concerns).

### خلط الأصناف بين الأشخاص والأجهزة {#classes-confuse-both-people-and-machines}

إضافةً إلى جعل إعادة استعمال الشيفرة وتنظيمها مهمةً صعبةً، وجدنا أنَّ الأصناف يمكن أن تشكل عائقًا كبيرًا لتعلم React. عليك أن تفهم كيفية عمل `this` في JavaScript، والتي تختلف عن عملها في أغلب اللغات. عليك أيضًا أن تتذكر أن تربط معالجات الحدث. بدون [اقتراحات الصيغة](https://babeljs.io/docs/en/babel-plugin-transform-class-properties/), اقتراحات الصيغة، تكون الشيفرة مسهبةً جدًا. يستطيع الآخرون فهم الخاصيات، والحالة، وتدفق البيانات من الأعلى للأسفل بشكل جيد ولكنهم لا يزالون يعانون مع الأصناف. يؤدي الفرق بين مكونات دالة وصنف في React ومتى يستخدم أحدهما إلى خلافات حتى بين مطوري React المحنَّكين.

إضافةً لما سبق، لقد كانت React متحجِّرةً لخمس سنوات ونريد أن نتأكد الآن من بقائها محدَّثة ومُطوَّرة في السنوات الخمس القادمة. كما أظهرت [Svelte](https://svelte.technology/), [Angular](https://angular.io/), [Glimmer](https://glimmerjs.com/), وغيرها، يملك التصريف المسبق [ahead-of-time compilation](https://en.wikipedia.org/wiki/Ahead-of-time_compilation) للعناصر الكثير من الإمكانيات المستقبلية خصوصًا إن لم تكن محدودةً بقالب. مؤخرًا، كنا نجري تجاربًا حول [طي المكونات](https://github.com/facebook/react/issues/7323) باستعمال [Prepack](https://prepack.io/), وظهرت معنا نتائج واعدة مبكرة. على أي حال، وجدنا أنَّ مكونات الأصناف يمكن أن تدعم الأنماط غير المقصودة (unintentional patterns) التي تجعل هذه التحسينات ترجع إلى مسارٍ أبطأ. تقدم الأصناف مشكلات للأدوات في هذه الأيام أيضًا. على سبيل المثال، الأصناف لا تصغر (minify) بشكل جيد، وتجعل إعادة التحميل الساخن هشًّا وغير موثوق. نريد أن نوجد واجهة برمجية تجعل الشيفرات في الطرف القابل للتحسين دومًا.

لحل هذه المشكلات، تسمح لك الخطافات باستعمال أكثر من ميزة من ميزات React دون اللجوء إلى الأصناف. من الناحية النظرية، مكونات React كانت وما تزال أقرب إلى الدوال. الخطافات تتبنى الدوال ولكن بدون التفريط بالجانب العملي في React. توفر الخطافات الوصول إلى مخارج هروب أمرية (imperative escape hatches) بديلة عن عالم React الوظيفي، إذ لا تطلب منك تعلم تقنيات البرمجة الوظيفية أو التفاعلية المعقدة.

>أمثلة
>
>توثيق [لمحة خاطفة عن الخطافات](/docs/hooks-overview.html) هو المكان الأمثل لبدء تعلم الخطافات، إذ يوفر الكثير من الأمثلة العملية المفيدة.

## خطة الاعتماد التدريجي {#gradual-adoption-strategy}

>**نعود ونذكر أنه لا توجد أية نية لحذف الأصناف من React.**

نعلم أن مطوري React يركزون على تضمين المنتجات ولا يملكون الوقت للنظر في كل واجهة برمجية يجري إصدارها. الخطافات جديدةٌ للغاية، ومن الأفضل التريث قليلًا ريثما يتوافر مزيدًا من الأمثلة والدروس التعليمية قبل اتخاذ قرار تعلمها أو اعتمادها.

نتفهَّم أيضًا أنَّ مجال الطلب على إضافة أنواع أساسية جديدة إلى React مرتفعٌ نسبيًا. للقرَّاء الفضوليين، أعددنا [الدليل RFC المفصل](https://github.com/reactjs/rfcs/pull/68) الذي يتعمق حول دافع إضافة الخطافات، ويوفر نظرة موسعة حول قرارات التصميم المحددة والأسلوب المرتبط السابق.

**الأهم من ذلك، تعمل الخطافات جنبًا بجنب مع الشيفرة القائمة، لذلك يمكنك اعتمادها تدريجيًا.** نشارك الآن الواجهة البرمجية التجريبية للحصول على تغذية راجعة من أولئك المهتمين بتشكيل مستقبل React.

أخيرًا، لا يوجد أي شيء يدفع للهجرة إلى الخطافات. ننصح بتجنب اعتماد الخطافات في المكونات الكبيرة خصوصًا مع مكونات الصنف المعقدة. تتطلب عملية تحول الأنظار إلى الخطافات واستعمالها بعض الوقت. بناءً على خبرتنا، من الأفضل التدرب على استعمال الخطافات من الآن في المكونات الجديدة وغير المهمة، والتأكُّد من أنَّ كل شخص في الفريق يشعر براحة تامة معها. بعد تجريب استعمال الخطافات، لا تتردد [بإرسال feedback](https://github.com/facebook/react/issues/new), سواءً أكانت إيجايبة أم سلبية.

بخصوص الخطافات، ننوي بأن تشمل جميع حالات الاستخدام الحالية للأصناف، ولكن **ولكن سنبقي دعم مكونات الأصناف (class components) في المستقبل.** ي فيسبوك، لدينا عشرات الآلاف من المكونات المكتوبة كأصناف، ولا نملك - بالتأكيد - أية خطة حاليًا لإعادة كتابتها من جديد.

## الأسئلة الشائعة {#frequently-asked-questions}

وفرنا [قسمًا خاصًّا للأسئلة الشائعة](/docs/hooks-faq.html) تجيب عن أغلب الأسئلة الشائعة المتعلقة بالخطافات.

## الخطوات التالية {#next-steps}

الآن، يجب أن تكون قد امتلكت فكرة تقريبية حول الخطافات وما هي المشكلات التي تحلها. على أي حال، نعلم أن أغلب هنالك الكثير من التفاصيل الغامضة، لذا لا تقلق. الخطوة التالية الآن هي الانتقال إلى الصفحة التالية "لمحة خاطفة عن الخطافات"، إذ ستبدأ فيها تعلم الخطافات عبر الأمثلة العملية.

